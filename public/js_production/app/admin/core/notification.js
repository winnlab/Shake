define(["canjs","core/appState"],function(e,t){var n=e.Map.extend({notification:{},visible:!1,hide:function(){var e=this,t=this.attr("notification.time");t=t?t:3e3,e.attr("notification.status")&&(t+=5e3),setTimeout(function(){e.attr("visible",!1)},t)}}),r=new n;return t.delegate("notification","set",function(){r.attr({notification:t.attr("notification"),visible:!0}),r.hide()}),e.Component.extend({tag:"notification",template:'{{#if visible}}<div id="appNotification" class="alert {{getClass}} alert-dismissable"><i class="fa {{getIcon}}"></i><b>Внимание:&nbsp;</b>{{notification.msg}}</div>{{/if}}',scope:r,helpers:{getClass:function(){var e=this.attr("notification.status"),t=e==="success"?"alert-success":"alert-danger";return t},getIcon:function(){var e=this.attr("notification.status"),t=e==="success"?"fa-check":"fa-ban";return t}},events:{click:function(){this.scope.attr("visible",!1)}}}),function(){var t=e.mustache("<notification></notification>");$(document.body).append(t())}});