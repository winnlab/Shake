define(["canjs","underscore","core/appState","core/helpers/preloader","app/soundCloudWidget/soundCloudWidget","css!app/podcast/css/podcast.css"],function(e,t,n,r,i){return e.Control.extend({defaults:{viewpath:"app/podcast/"}},{init:function(){var s=this;s.element.html(e.view(s.options.viewpath+"index.stache",{currentTrackPosition:this.currentTrackPosition,appState:n},{makeBg:function(e){if(e()){var r=e().attr("id"),i=t.find(n.attr("soundCloudImages"),function(e){return e.attr("playlistId")===r});i?s.element.css("background-image","url(/uploads/"+i.image+")"):s.element.removeAttr("style")}return""}})),s.initFuturePodcasts(),i.initSoundCloudWidget($("#widgetWrapper",s.element),!0),s.options.isReady&&new r({images:t.pluck(n.attr("soundCloudImages"),"image"),callback:function(){s.options.isReady.resolve()}}),s.initBindings()},initBindings:function(){n.bind("podcastChange",function(){console.log("binding"),i.playPlaylist($("#widgetWrapper",self.element),n.attr("podcast.playlists"))})},initFuturePodcasts:function(){var t=this;$("#marquee",this.element).html(e.view(t.options.viewpath+"marquee.stache",{appState:n}))},".nextTrack click":function(){i.playNextPlaylist($("#widgetWrapper",self.element))},".prevTrack click":function(){i.playPrevPlaylist($("#widgetWrapper",self.element))}})});