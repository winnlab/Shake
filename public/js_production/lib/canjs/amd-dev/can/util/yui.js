/*!
 * CanJS - 2.1.2
 * http://canjs.us/
 * Copyright (c) 2014 Bitovi
 * Mon, 16 Jun 2014 20:44:18 GMT
 * Licensed MIT
 * Includes: CanJS default build
 * Download from: http://canjs.us/
 */

define(["can/util/can","can/util/attr","yui","can/event","can/util/fragment","can/util/array/each","can/util/object/isplain","can/util/deferred","can/util/hashchange","can/util/inserted"],function(can,attr){YUI.add("can-modifications",function(e,t){var n=e.DOM.addHTML;e.DOM.addHTML=function(e,t,r){if(typeof t=="string"||typeof t=="number")t=can.buildFragment(t);var i;t.nodeType===11?i=can.makeArray(t.childNodes):i=[t];var s=n.call(this,e,t,r);return can.inserted(i),s};var r=e.Node.prototype.on;e.Node.prototype.on=function(e,t){if(e==="attributes"){var n=can.$(this);can.data(n,"canHasAttributesBindings",(can.data(n,"canHasAttributesBindings")||0)+1);var i=r.apply(this,arguments),s=i.detach;return i.detach=function(){var e=can.data(n,"canHasAttributesBindings")||0;return e<=0?can.cleanData(n,"canHasAttributesBindings"):can.data(n,"canHasAttributesBindings",e-1),s.apply(this,arguments)},i}return r.apply(this,arguments)}},"3.7.3",{requires:["node-base"]});var Y=can.Y=can.Y||YUI().use("*");can.trim=function(e){return Y.Lang.trim(e)},can.makeArray=function(e){return e?Y.Array(e):[]},can.isArray=Y.Lang.isArray,can.inArray=function(e,t,n){return t?Y.Array.indexOf(t,e,n):-1},can.map=function(e,t){return Y.Array.map(can.makeArray(e||[]),t)},can.extend=function(e){var t=e===!0?1:0,n=arguments[t],r=t+1,i;for(;i=arguments[r];r++)Y.mix(n,i,!0,null,null,!!t);return n},can.param=function(e){return Y.QueryString.stringify(e,{arrayKey:!0})},can.isEmptyObject=function(e){return Y.Object.isEmpty(e)},can.proxy=function(e,t){return Y.bind.apply(Y,arguments)},can.isFunction=function(e){return Y.Lang.isFunction(e)};var prepareNodeList=function(e){return e.each(function(t,n){e[n]=t.getDOMNode()}),e.length=e.size(),e};can.$=function(e){return e===window?window:e instanceof Y.NodeList?prepareNodeList(e):typeof e=="object"&&!can.isArray(e)&&typeof e.nodeType=="undefined"&&!e.getDOMNode?new Y.NodeList(e):prepareNodeList(Y.all(e))},can.get=function(e,t){return e._nodes[t]},can.append=function(e,t){e.each(function(e){typeof t=="string"&&(t=can.buildFragment(t,e)),e.append(t)})},can.addClass=function(e,t){return e.addClass(t)},can.data=function(e,t,n){return n===undefined?e.item(0).getData(t):e.item(0).setData(t,n)},can.remove=function(e){return e.remove()&&e.destroy()},can.has=function(e,t){return Y.DOM.contains(e[0],t)?e:[]},can._yNodeRemove=can._yNodeRemove||Y.Node.prototype.remove,Y.Node.prototype.remove=function(){var e=this.getDOMNode();if(e.nodeType===1){can.trigger(this,"removed",[],!1);var t=e.getElementsByTagName("*");for(var n=0,r;(r=t[n])!==undefined;n++)can.trigger(r,"removed",[],!1)}can._yNodeRemove.apply(this,arguments)},Y.NodeList.addMethod("remove",Y.Node.prototype.remove);var optionsMap={type:"method",success:undefined,error:undefined},updateDeferred=function(e,t){if(e&&e.io){var n=e.io;for(var r in n)typeof t[r]=="function"?t[r]=function(){n[r].apply(n,arguments)}:t[r]=r[n]}};can.ajax=function(options){var d=can.Deferred(),requestOptions=can.extend({},options);for(var option in optionsMap)requestOptions[option]!==undefined&&(requestOptions[optionsMap[option]]=requestOptions[option],delete requestOptions[option]);requestOptions.sync=!options.async;var success=options.success,error=options.error;requestOptions.on={success:function(transactionid,response){var data=response.responseText;options.dataType==="json"&&(data=eval("("+data+")")),updateDeferred(request,d),d.resolve(data),success&&success(data,"success",request)},failure:function(e,t){updateDeferred(request,d),d.reject(request,"error"),error&&error(request,"error")}};var request=Y.io(requestOptions.url,requestOptions);return updateDeferred(request,d),d};var yuiEventId=0,addBinding=function(e,t,n,r){if(e instanceof Y.NodeList||!e.on||e.getDOMNode)e.each(function(e){e=can.$(e);var i=can.data(e,"events"),s=n+":"+t;i||can.data(e,"events",i={}),i[s]||(i[s]={}),r.__bindingsIds===undefined&&(r.__bindingsIds=yuiEventId++),i[s][r.__bindingsIds]=t?e.item(0).delegate(n,r,t):e.item(0).on(n,r)});else{var i=e,s=i.__canEvents=i.__canEvents||{};s[n]||(s[n]={}),r.__bindingsIds===undefined&&(r.__bindingsIds=yuiEventId++),s[n][r.__bindingsIds]=i.on(n,r)}},removeBinding=function(e,t,n,r){if(e instanceof Y.NodeList||!e.on||e.getDOMNode)e.each(function(e){e=can.$(e);var i=can.data(e,"events");if(i){var s=n+":"+t,o=i[s],u=o[r.__bindingsIds];u.detach(),delete o[r.__bindingsIds],can.isEmptyObject(o)&&delete i[n],can.isEmptyObject(i)}});else{var i=e,s=i.__canEvents||{},o=s[n],u=o[r.__bindingsIds];u.detach(),delete o[r.__bindingsIds],can.isEmptyObject(o)&&delete s[n],can.isEmptyObject(s)}};can.bind=function(e,t){return this.bind&&this.bind!==can.bind?this.bind(e,t):this.on||this.nodeType?addBinding(can.$(this),undefined,e,t):this.addEvent?this.addEvent(e,t):can.addEvent.call(this,e,t),this},can.unbind=function(e,t){return this.unbind&&this.unbind!==can.unbind?this.unbind(e,t):this.on||this.nodeType?removeBinding(can.$(this),undefined,e,t):can.removeEvent.call(this,e,t),this},can.on=can.bind,can.off=can.unbind,can.trigger=function(e,t,n,r){e instanceof Y.NodeList&&(e=e.item(0)),e.getDOMNode&&(e=e.getDOMNode()),e.nodeName?(e=Y.Node(e),r===!1&&e.once(t,function(e){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e._stopper&&e._stopper()}),typeof t!="string"&&(n=t,t=n.type,delete n.type),realTrigger(e.getDOMNode(),t,n||{})):(typeof t=="string"&&(t={type:t}),t.target=t.target||e,can.dispatch.call(e,t,can.makeArray(n)))},Y.mix(Y.Node.DOM_EVENTS,{removed:!0,inserted:!0,attributes:!0,foo:!0}),Y.Env.evt.plugins.attributes={on:function(){var e=can.makeArray(arguments);return Y.Event._attach(e,{facade:!1})}},can.delegate=function(e,t,n){return this.on||this.nodeType?addBinding(can.$(this),e,t,n):this.delegate?this.delegate(e,t,n):can.bind.call(this,t,n),this},can.undelegate=function(e,t,n){return this.on||this.nodeType?removeBinding(can.$(this),e,t,n):this.undelegate?this.undelegate(e,t,n):can.unbind.call(this,t,n),this};var realTrigger,realTriggerHandler=function(e,t,n){var r=Y.Node(e),i=can.Y.Event.getListeners(r._yuid,t),s;if(i)for(s=0;s<i.length;s++)if(i[s].fire)i[s].fire(n);else{if(!i[s].handles)throw"can not fire event";can.each(i[s].handles,function(e){e.evt.fire(n)})}},fakeTrigger=function(e,t,n){var r=!1,i=can.extend({type:t,target:e,faux:!0,_stopper:function(){r=this.cancelBubble},stopPropagation:function(){r=this.cancelBubble},preventDefault:function(){}},n);realTriggerHandler(e,t,i);if(t==="inserted"||t==="removed")return;while(!r&&e!==document&&e.parentNode)e=e.parentNode,realTriggerHandler(e,t,i)};return document.createEvent?realTrigger=function(e,t,n){fakeTrigger(e,t,n);return}:realTrigger=function(e,t,n){fakeTrigger(e,t,n);return},can.attr=attr,delete attr.MutationObserver,can});