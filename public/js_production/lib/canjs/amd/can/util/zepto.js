/*!
 * CanJS - 2.1.2
 * http://canjs.us/
 * Copyright (c) 2014 Bitovi
 * Mon, 16 Jun 2014 20:44:18 GMT
 * Licensed MIT
 * Includes: CanJS default build
 * Download from: http://canjs.us/
 */

define(["can/util/can","can/util/attr","can/event","zepto","can/util/object/isplain","can/util/fragment","can/util/deferred","can/util/array/each","can/util/inserted"],function(e,t,n){function a(e,t){var n=e[u],o=n&&i[n];return t===undefined?o||f(e):o&&o[t]||s.call(r(e),t)}function f(e,t,n){var r=e[u]||(e[u]=++o),s=i[r]||(i[r]={});return t!==undefined&&(s[t]=n),s}var r=Zepto,i={},s=r.fn.data,o=r.uuid=+(new Date),u=r.expando="Zepto"+o;r.fn.data=function(e,t){return t===undefined?this.length===0?undefined:a(this[0],e):this.each(function(n){f(this,e,r.isFunction(t)?t.call(this,n,a(this,e)):t)})},r.cleanData=function(t){for(var n=0,r;(r=t[n])!==undefined;n++)e.trigger(r,"removed",[],!1);for(n=0;(r=t[n])!==undefined;n++){var s=r[u];delete i[s]}};var l=e.each;r.extend(e,Zepto),e.each=l,e.attr=t,e.event=n;var c=function(e,t){return e[0]&&e[0][t]||e[t]};e.trigger=function(t,n,i,s){t.trigger?t.trigger(n,i):c(t,"dispatchEvent")?s===!1?r([t]).triggerHandler(n,i):r([t]).trigger(n,i):(typeof n=="string"&&(n={type:n}),n.target=n.target||t,e.dispatch.call(t,n,e.makeArray(i)))},e.$=Zepto,e.bind=function(t,n){return this.bind&&this.bind!==e.bind?this.bind(t,n):c(this,"addEventListener")?r([this]).bind(t,n):e.addEvent.call(this,t,n),this},e.unbind=function(t,n){return this.unbind&&this.unbind!==e.unbind?this.unbind(t,n):c(this,"addEventListener")?r([this]).unbind(t,n):e.removeEvent.call(this,t,n),this},e.on=e.bind,e.off=e.unbind,e.delegate=function(t,n,i){t?this.delegate?this.delegate(t,n,i):c(this,"addEventListener")?r([this]).delegate(t,n,i):e.addEvent.call(this,n,i):e.bind.call(this,n,i)},e.undelegate=function(t,n,i){t?this.undelegate?this.undelegate(t,n,i):c(this,"addEventListener")?r([this]).undelegate(t,n,i):e.removeEvent.call(this,n,i):e.unbind.call(this,n,i)},r.each(["append","filter","addClass","remove","data","has"],function(t,n){e[n]=function(t){return t[n].apply(t,e.makeArray(arguments).slice(1))}}),e.makeArray=function(t){var n=[];return t==null?[]:t.length===undefined||typeof t=="string"?[t]:(e.each(t,function(e,t){n[t]=e}),n)},e.proxy=function(e,t){return function(){return e.apply(t,arguments)}};var h=r.ajaxSettings.xhr;r.ajaxSettings.xhr=function(){var e=h(),t=e.open;return e.open=function(e,n,r){t.call(this,e,n,p===undefined?!0:p)},e};var p,d=r.ajax,v=function(e,t){for(var n in e)typeof t[n]=="function"?t[n]=function(){e[n].apply(e,arguments)}:t[n]=n[e]};e.ajax=function(t){var n=t.success,r=t.error,i=e.Deferred();t.success=function(e){v(s,i),i.resolve.call(i,e),n&&n.apply(this,arguments)},t.error=function(){v(s,i),i.reject.apply(i,arguments),r&&r.apply(this,arguments)},t.async===!1&&(p=!1);var s=d(t);return p=undefined,v(s,i),i};var m=r.fn.empty;r.fn.empty=function(){return this.each(function(){r.cleanData(this.getElementsByTagName("*")),this.innerHTML=""}),m.call(this)};var g=r.fn.remove;r.fn.remove=function(){return this.each(function(){this.getElementsByTagName&&r.cleanData([this].concat(e.makeArray(this.getElementsByTagName("*"))))}),g.call(this)},e.trim=function(e){return e.trim()},e.isEmptyObject=function(e){var t;for(t in e);return t===undefined},e.extend=function(t){if(t===!0){var n=e.makeArray(arguments);return n.shift(),r.extend.apply(r,n)}return r.extend.apply(r,arguments)},e.get=function(e,t){return e[t]},e.each(["after","prepend","before","append","html"],function(t){var n=Zepto.fn[t];Zepto.fn[t]=function(){var t,i=e.makeArray(arguments);i[0]!=null&&(typeof i[0]=="string"&&(i[0]=r.zepto.fragment(i[0])),i[0].nodeType===11?t=e.makeArray(i[0].childNodes):t=[i[0]]);var s=n.apply(this,i);return e.inserted(t),s}}),delete t.MutationObserver;var y=r.fn.attr;r.fn.attr=function(t,n){var r=typeof t=="string",i,s;n!==undefined&&r&&(i=y.call(this,t));var o=y.apply(this,arguments);return n!==undefined&&r&&(s=y.call(this,t)),s!==i&&e.attr.trigger(this[0],t,i),o};var b=r.fn.removeAttr;r.fn.removeAttr=function(t){var n=y.call(this,t),r=b.apply(this,arguments);return n!=null&&e.attr.trigger(this[0],t,n),r};var w=r.fn.bind,E=r.fn.unbind;return r.fn.bind=function(t){return t==="attributes"&&this.each(function(){var t=e.$(this);e.data(t,"canHasAttributesBindings",(e.data(t,"canHasAttributesBindings")||0)+1)}),w.apply(this,arguments)},r.fn.unbind=function(t){return t==="attributes"&&this.each(function(){var t=e.$(this),n=e.data(t,"canHasAttributesBindings")||0;n<=0?e.data(t,"canHasAttributesBindings",0):e.data(t,"canHasAttributesBindings",n-1)}),E.apply(this,arguments)},e});