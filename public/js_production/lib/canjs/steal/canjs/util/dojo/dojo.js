/*!
 * CanJS - 2.1.2
 * http://canjs.us/
 * Copyright (c) 2014 Bitovi
 * Mon, 16 Jun 2014 20:44:18 GMT
 * Licensed MIT
 * Includes: CanJS default build
 * Download from: http://canjs.us/
 */

steal("can/util/can.js","can/util/attr","dojo","can/event","can/util/fragment.js","can/util/array/each.js","can/util/object/isplain","can/util/deferred.js","../hashchange.js","can/util/inserted",function(e,t){function l(e,t){var n=e[f],r=n&&u[n];return t===undefined?r||c(e):r&&r[t]}function c(e,t,n){var r=e[f]||(e[f]=++a),i=u[r]||(u[r]={});return t!==undefined&&(i[t]=n),i}var n=window.dojo;define("plugd/trigger",["dojo"],function(e){var t=e,n=t.isFunction,r=/mouse(enter|leave)/,i=function(e,t){return"mouse"+(t==="enter"?"over":"out")},s=t._mixin,o;return t.doc.createEvent?o=function(e,n,o){var u=t.doc.createEvent("HTMLEvents");n=n.replace(r,i),u.initEvent(n,n==="removed"||n==="inserted"?!1:!0,!0),o&&s(u,o),e.dispatchEvent(u)}:o=function(e,r,i){var o="on"+r,u=!1;try{var a=document.createEventObject();if(r==="inserted"||r==="removed")a.cancelBubble=!0;s(a,i),e.fireEvent(o,a)}catch(f){var l=s({type:r,target:e,faux:!0,_stopper:function(){u=this.cancelBubble}},i);n(e[o])&&e[o](l);if(r==="inserted"||r==="removed")return;while(!u&&e!==t.doc&&e.parentNode)e=e.parentNode,n(e[o])&&e[o](l)}},t._trigger=function(e,n,r){typeof n!="string"&&(r=n,n=r.type,delete r.type);var i=t.byId(e),s=n&&n.slice(0,2)==="on"?n.slice(2):n;o(i,s,r)},t.trigger=function(e,r,i){return n(e)||n(r)||n(e[r])?t.hitch.apply(t,arguments)():t._trigger.apply(t,arguments)},t.NodeList.prototype.trigger=t.NodeList._adaptAsForEach(t._trigger),t._Node&&!t._Node.prototype.trigger&&t.extend(t._Node,{trigger:function(e,n){return t._trigger(this,e,n),this}}),t.trigger}),require(["dojo","dojo/query","plugd/trigger","dojo/NodeList-dom"]),e.trim=function(e){return e&&n.trim(e)},e.makeArray=function(e){var t=[];return n.forEach(e,function(e){t.push(e)}),t},e.isArray=n.isArray,e.inArray=function(e,t,r){return n.indexOf(t,e,r)},e.map=function(t,r){return n.map(e.makeArray(t||[]),r)},e.extend=function(t){if(t===!0){var r=e.makeArray(arguments);return r.shift(),n.mixin.apply(n,r)}return n.mixin.apply(n,arguments)},e.isEmptyObject=function(e){var t;for(t in e)break;return t===undefined},e.param=function(t){var n=[],r=function(e,t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))};for(var i in t)e.buildParam(i,t[i],r);return n.join("&").replace(/%20/g,"+")},e.buildParam=function(t,r,i){if(e.isArray(r))for(var s=0,o=r.length;s<o;++s)i(t+"[]",r[s]);else if(n.isObject(r))for(var u in r)e.buildParam(t+"["+u+"]",r[u],i);else i(t,r)},e.proxy=function(e,t){return n.hitch(t,e)},e.isFunction=function(e){return n.isFunction(e)};var r=0,i=function(t,i,s){t.forEach(function(t){t=new n.NodeList(t.nodeName==="SELECT"?[t]:t);var o=e.data(t,"events");o||e.data(t,"events",o={}),o[i]||(o[i]={}),s.__bindingsIds===undefined&&(s.__bindingsIds=r++),o[i][s.__bindingsIds]=t.on(i,s)[0]})},s=function(t,r,i){t.forEach(function(t){var s=new n.NodeList(t),o=e.data(s,"events");if(!o)return;var u=o[r];if(!u)return;var a=u[i.__bindingsIds];n.disconnect(a),delete u[i.__bindingsIds],e.isEmptyObject(u)&&delete o[r]})};e.bind=function(t,r){return this.bind&&this.bind!==e.bind?this.bind(t,r):this.on||this.nodeType?i(new n.NodeList(this.nodeName==="SELECT"?[this]:this),t,r):this.addEvent?this.addEvent(t,r):e.addEvent.call(this,t,r),this},e.unbind=function(t,r){return this.unbind&&this.unbind!==e.unbind?this.unbind(t,r):this.on||this.nodeType?s(new n.NodeList(this),t,r):e.removeEvent.call(this,t,r),this},e.on=e.bind,e.off=e.unbind,e.trigger=function(t,r,i,s){!(t instanceof n.NodeList)&&(t.nodeName||t===window)&&(t=e.$(t));if(t.trigger)if(s===!1){if(!t[0]||t[0].nodeType===3)return;var o=t.on(r,function(e){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e._stopper&&e._stopper(),n.disconnect(o)});t.trigger(r,i)}else t.trigger(r,i);else typeof r=="string"&&(r={type:r}),r.target=r.target||t,e.dispatch.call(t,r,e.makeArray(i))},e.delegate=function(t,r,s){return t?this.on||this.nodeType?i(new n.NodeList(this),t+":"+r,s):this.delegate?this.delegate(t,r,s):e.bind.call(this,r,s):e.bind.call(this,r,s),this},e.undelegate=function(t,r,i){return t?this.on||this.nodeType?s(new n.NodeList(this),t+":"+r,i):this.undelegate?this.undelegate(t,r,i):e.unbind.call(this,r,i):e.unbind.call(this,r,i),this};var o=function(e,t){for(var n in e)typeof t[n]=="function"?t[n]=function(){e[n].apply(e,arguments)}:t[n]=n[e]};e.ajax=function(t){var r=e.capitalize((t.type||"get").toLowerCase()),i=n["xhr"+r],s=t.success,u=t.error,a=new e.Deferred,f=i({url:t.url,handleAs:t.dataType,sync:!t.async,headers:t.headers,content:t.data});f.then(function(e,t){o(l,a),a.resolve(e,"success",l),s&&s(e,"success",l)},function(e,t){o(l,a),a.reject(l,"error"),u(l,"error")});var l=f.ioArgs.xhr;return o(l,a),a},e.$=function(e){return e===window?window:typeof e=="string"?n.query(e):new n.NodeList(e&&e.nodeName?[e]:e)},e.append=function(e,t){return e.forEach(function(e){n.place(t,e)})};var u={},a=e.uuid=+(new Date),f=e.expando="can"+a,h=function(t){var r=[];for(var i=0,s=t.length;i<s;i++)t[i].nodeType===1&&r.push(t[i]);e.trigger(new n.NodeList(r),"removed",[],!1),i=0;for(var o;(o=t[i])!==undefined;i++){var a=o[f];delete u[a]}};e.data=function(e,t,n){return n===undefined?e.length===0?undefined:l(e[0],t):e.forEach(function(e){c(e,t,n)})},e.cleanData=function(e,t){var n=e[f];delete u[n][t]},n.empty=function(e){for(var t;t=e.lastChild;)n.destroy(t)};var p=n.destroy;n.destroy=function(t){t=n.byId(t);var r=[t];return t.getElementsByTagName&&r.concat(e.makeArray(t.getElementsByTagName("*"))),h(r),p.apply(n,arguments)};var d=n.place;n.place=function(t,n,r){typeof t=="string"&&/^\s*</.test(t)&&(t=e.buildFragment(t));var i;t.nodeType===11?i=e.makeArray(t.childNodes):i=[t];var s=d.call(this,t,n,r);return e.inserted(i),s},e.addClass=function(e,t){return e.addClass(t)},e.remove=function(t){var n=[];return t.forEach(function(t){n.push(t),t.getElementsByTagName&&n.push.apply(n,e.makeArray(t.getElementsByTagName("*")))}),h(n),t.forEach(p),t},e.get=function(e,t){return e[t]},e.has=function(e,t){return n.isDescendant(t,e[0])?e:[]},e.extend(n.Deferred.prototype,{pipe:function(e,t){var r=new n.Deferred;return this.addCallback(function(){r.resolve(e.apply(this,arguments))}),this.addErrback(function(){t?r.reject(t.apply(this,arguments)):r.reject.apply(r,arguments)}),r}}),e.attr=t,delete t.MutationObserver;var v=n.NodeList.prototype.on;n.NodeList.prototype.on=function(t){t==="attributes"&&this.forEach(function(t){var n=e.$(t);e.data(n,"canHasAttributesBindings",(e.data(n,"canHasAttributesBindings")||0)+1)});var n=v.apply(this,arguments);if(t==="attributes"){var r=this;e.each(n,function(t,n){var i=t.remove;t.remove=function(){var t=e.$(r[n]),s=e.data(t,"canHasAttributesBindings")||0;return s<=0?e.cleanData(r[n],"canHasAttributesBindings"):e.data(t,"canHasAttributesBindings",s-1),i.call(this,arguments)}})}return n};var m=n.setAttr;n.setAttr=function(t,r,i){var s=n.getAttr(t,r),o=m.apply(this,arguments),u=n.getAttr(t,r);return u!==s&&e.attr.trigger(t,r,s),o};var g=n.removeAttr;return n.removeAttr=function(t,r){var i=n.getAttr(t,r),s=g.apply(this,arguments);return i!=null&&e.attr.trigger(t,r,i),s},e});