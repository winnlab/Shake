var Recorder={swfObject:null,_callbacks:{},_events:{},_initialized:!1,options:{},initialize:function(e){this.options=e||{},this.options.flashContainer||this._setupFlashContainer(),this.bind("initialized",function(){Recorder._initialized=!0,e.initialized()}),this.bind("showFlash",this.options.onFlashSecurity||this._defaultOnShowFlash),this._loadFlash()},clear:function(){Recorder._events={}},record:function(e){e=e||{},this.clearBindings("recordingStart"),this.clearBindings("recordingProgress"),this.clearBindings("recordingCancel"),this.bind("recordingStart",this._defaultOnHideFlash),this.bind("recordingCancel",this._defaultOnHideFlash),this.bind("recordingCancel",this._loadFlash),this.bind("recordingStart",e.start),this.bind("recordingProgress",e.progress),this.bind("recordingCancel",e.cancel),this.flashInterface().record()},stop:function(){return this.flashInterface()._stop()},play:function(e){e=e||{},this.clearBindings("playingProgress"),this.bind("playingProgress",e.progress),this.bind("playingStop",e.finished),this.flashInterface()._play()},upload:function(e){e.audioParam=e.audioParam||"audio",e.params=e.params||{},this.clearBindings("uploadSuccess"),this.bind("uploadSuccess",function(t){e.success(Recorder._externalInterfaceDecode(t))}),this.flashInterface().upload(e.url,e.audioParam,e.params)},audioData:function(){return this.flashInterface().audioData().split(";")},request:function(e,t,n,r,i){var s=this.registerCallback(i);this.flashInterface().request(e,t,n,r,s)},clearBindings:function(e){Recorder._events[e]=[]},bind:function(e,t){Recorder._events[e]||(Recorder._events[e]=[]),Recorder._events[e].push(t)},triggerEvent:function(e,t,n){Recorder._executeInWindowContext(function(){for(var r in Recorder._events[e])Recorder._events[e][r]&&Recorder._events[e][r].apply(Recorder,[t,n])})},triggerCallback:function(e,t){Recorder._executeInWindowContext(function(){Recorder._callbacks[e].apply(null,t)})},registerCallback:function(e){var t="CB"+parseInt(Math.random()*999999,10);return Recorder._callbacks[t]=e,t},flashInterface:function(){if(!this.swfObject)return null;if(this.swfObject.record)return this.swfObject;if(this.swfObject.children[3].record)return this.swfObject.children[3]},_executeInWindowContext:function(e){window.setTimeout(e,1)},_setupFlashContainer:function(){this.options.flashContainer=document.createElement("div"),this.options.flashContainer.setAttribute("id","recorderFlashContainer"),this.options.flashContainer.setAttribute("style","position: fixed; left: -9999px; top: -9999px; width: 230px; height: 140px; margin-left: 10px; border-top: 6px solid rgba(128, 128, 128, 0.6); border-bottom: 6px solid rgba(128, 128, 128, 0.6); border-radius: 5px 5px; padding-bottom: 1px; padding-right: 1px;"),document.body.appendChild(this.options.flashContainer)},_clearFlash:function(){var e=this.options.flashContainer.children[0];e&&this.options.flashContainer.removeChild(e)},_loadFlash:function(){this._clearFlash();var e=document.createElement("div");e.setAttribute("id","recorderFlashObject"),this.options.flashContainer.appendChild(e),swfobject.embedSWF(this.options.swfSrc,"recorderFlashObject","231","141","10.1.0",undefined,undefined,{allowscriptaccess:"always"},undefined,function(e){e.success?(Recorder.swfObject=e.ref,Recorder._checkForFlashBlock()):Recorder._showFlashRequiredDialog()})},_defaultOnShowFlash:function(){var e=Recorder.options.flashContainer;e.style.left=(window.innerWidth||document.body.offsetWidth)/2-115+"px",e.style.top=(window.innerHeight||document.body.offsetHeight)/2-70+"px"},_defaultOnHideFlash:function(){var e=Recorder.options.flashContainer;e.style.left="-9999px",e.style.top="-9999px"},_checkForFlashBlock:function(){window.setTimeout(function(){Recorder._initialized||Recorder.triggerEvent("showFlash")},500)},_showFlashRequiredDialog:function(){Recorder.options.flashContainer.innerHTML="<p>Adobe Flash Player 10.1 or newer is required to use this feature.</p><p><a href='http://get.adobe.com/flashplayer' target='_top'>Get it on Adobe.com.</a></p>",Recorder.options.flashContainer.style.color="white",Recorder.options.flashContainer.style.backgroundColor="#777",Recorder.options.flashContainer.style.textAlign="center",Recorder.triggerEvent("showFlash")},_externalInterfaceDecode:function(e){return e.replace(/%22/g,'"').replace(/%5c/g,"\\").replace(/%26/g,"&").replace(/%25/g,"%")}};if(swfobject==undefined)var swfobject=function(){function C(){if(b)return;try{var e=a.getElementsByTagName("body")[0].appendChild(U("span"));e.parentNode.removeChild(e)}catch(t){return}b=!0;var n=c.length;for(var r=0;r<n;r++)c[r]()}function k(e){b?e():c[c.length]=e}function L(t){if(typeof u.addEventListener!=e)u.addEventListener("load",t,!1);else if(typeof a.addEventListener!=e)a.addEventListener("load",t,!1);else if(typeof u.attachEvent!=e)z(u,"onload",t);else if(typeof u.onload=="function"){var n=u.onload;u.onload=function(){n(),t()}}else u.onload=t}function A(){l?O():M()}function O(){var n=a.getElementsByTagName("body")[0],r=U(t);r.setAttribute("type",i);var s=n.appendChild(r);if(s){var o=0;!function(){if(typeof s.GetVariable!=e){var t=s.GetVariable("$version");t&&(t=t.split(" ")[1].split(","),T.pv=[parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)])}else if(o<10){o++,setTimeout(arguments.callee,10);return}n.removeChild(r),s=null,M()}()}else M()}function M(){var t=h.length;if(t>0)for(var n=0;n<t;n++){var r=h[n].id,i=h[n].callbackFn,s={success:!1,id:r};if(T.pv[0]>0){var o=R(r);if(o)if(W(h[n].swfVersion)&&!(T.wk&&T.wk<312))V(r,!0),i&&(s.success=!0,s.ref=_(r),i(s));else if(h[n].expressInstall&&D()){var u={};u.data=h[n].expressInstall,u.width=o.getAttribute("width")||"0",u.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(u.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(u.align=o.getAttribute("align"));var a={},f=o.getElementsByTagName("param"),l=f.length;for(var c=0;c<l;c++)f[c].getAttribute("name").toLowerCase()!="movie"&&(a[f[c].getAttribute("name")]=f[c].getAttribute("value"));P(u,a,r,i)}else H(o),i&&i(s)}else{V(r,!0);if(i){var p=_(r);p&&typeof p.SetVariable!=e&&(s.success=!0,s.ref=p),i(s)}}}}function _(n){var r=null,i=R(n);if(i&&i.nodeName=="OBJECT")if(typeof i.SetVariable!=e)r=i;else{var s=i.getElementsByTagName(t)[0];s&&(r=s)}return r}function D(){return!w&&W("6.0.65")&&(T.win||T.mac)&&!(T.wk&&T.wk<312)}function P(t,n,r,i){w=!0,g=i||null,y={success:!1,id:r};var o=R(r);if(o){o.nodeName=="OBJECT"?(v=B(o),m=null):(v=o,m=r),t.id=s;if(typeof t.width==e||!/%$/.test(t.width)&&parseInt(t.width,10)<310)t.width="310";if(typeof t.height==e||!/%$/.test(t.height)&&parseInt(t.height,10)<137)t.height="137";a.title=a.title.slice(0,47)+" - Flash Player Installation";var f=T.ie&&T.win?"ActiveX":"PlugIn",l="MMredirectURL="+encodeURI(u.location).toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+a.title;typeof n.flashvars!=e?n.flashvars+="&"+l:n.flashvars=l;if(T.ie&&T.win&&o.readyState!=4){var c=U("div");r+="SWFObjectNew",c.setAttribute("id",r),o.parentNode.insertBefore(c,o),o.style.display="none",!function(){o.readyState==4?o.parentNode.removeChild(o):setTimeout(arguments.callee,10)}()}j(t,n,r)}}function H(e){if(T.ie&&T.win&&e.readyState!=4){var t=U("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(B(e),t),e.style.display="none",!function(){e.readyState==4?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(B(e),e)}function B(e){var n=U("div");if(T.win&&T.ie)n.innerHTML=e.innerHTML;else{var r=e.getElementsByTagName(t)[0];if(r){var i=r.childNodes;if(i){var s=i.length;for(var o=0;o<s;o++)(i[o].nodeType!=1||i[o].nodeName!="PARAM")&&i[o].nodeType!=8&&n.appendChild(i[o].cloneNode(!0))}}}return n}function j(n,r,s){var o,u=R(s);if(T.wk&&T.wk<312)return o;if(u){typeof n.id==e&&(n.id=s);if(T.ie&&T.win){var a="";for(var f in n)n[f]!=Object.prototype[f]&&(f.toLowerCase()=="data"?r.movie=n[f]:f.toLowerCase()=="styleclass"?a+=' class="'+n[f]+'"':f.toLowerCase()!="classid"&&(a+=" "+f+'="'+n[f]+'"'));var l="";for(var c in r)r[c]!=Object.prototype[c]&&(l+='<param name="'+c+'" value="'+r[c]+'" />');u.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+l+"</object>",p[p.length]=n.id,o=R(n.id)}else{var h=U(t);h.setAttribute("type",i);for(var d in n)n[d]!=Object.prototype[d]&&(d.toLowerCase()=="styleclass"?h.setAttribute("class",n[d]):d.toLowerCase()!="classid"&&h.setAttribute(d,n[d]));for(var v in r)r[v]!=Object.prototype[v]&&v.toLowerCase()!="movie"&&F(h,v,r[v]);u.parentNode.replaceChild(h,u),o=h}}return o}function F(e,t,n){var r=U("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function I(e){var t=R(e);t&&t.nodeName=="OBJECT"&&(T.ie&&T.win?(t.style.display="none",!function(){t.readyState==4?q(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function q(e){var t=R(e);if(t){for(var n in t)typeof t[n]=="function"&&(t[n]=null);t.parentNode.removeChild(t)}}function R(e){var t=null;try{t=a.getElementById(e)}catch(n){}return t}function U(e){return a.createElement(e)}function z(e,t,n){e.attachEvent(t,n),d[d.length]=[e,t,n]}function W(e){var t=T.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function X(n,r,i,s){if(T.ie&&T.mac)return;var o=a.getElementsByTagName("head")[0];if(!o)return;var u=i&&typeof i=="string"?i:"screen";s&&(E=null,S=null);if(!E||S!=u){var f=U("style");f.setAttribute("type","text/css"),f.setAttribute("media",u),E=o.appendChild(f),T.ie&&T.win&&typeof a.styleSheets!=e&&a.styleSheets.length>0&&(E=a.styleSheets[a.styleSheets.length-1]),S=u}T.ie&&T.win?E&&typeof E.addRule==t&&E.addRule(n,r):E&&typeof a.createTextNode!=e&&E.appendChild(a.createTextNode(n+" {"+r+"}"))}function V(e,t){if(!x)return;var n=t?"visible":"hidden";b&&R(e)?R(e).style.visibility=n:X("#"+e,"visibility:"+n)}function $(t){var n=/[\\\"<>\.;]/,r=n.exec(t)!=null;return r&&typeof encodeURIComponent!=e?encodeURIComponent(t):t}var e="undefined",t="object",n="Shockwave Flash",r="ShockwaveFlash.ShockwaveFlash",i="application/x-shockwave-flash",s="SWFObjectExprInst",o="onreadystatechange",u=window,a=document,f=navigator,l=!1,c=[A],h=[],p=[],d=[],v,m,g,y,b=!1,w=!1,E,S,x=!0,T=function(){var s=typeof a.getElementById!=e&&typeof a.getElementsByTagName!=e&&typeof a.createElement!=e,o=f.userAgent.toLowerCase(),c=f.platform.toLowerCase(),h=c?/win/.test(c):/win/.test(o),p=c?/mac/.test(c):/mac/.test(o),d=/webkit/.test(o)?parseFloat(o.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,v=!1,m=[0,0,0],g=null;if(typeof f.plugins!=e&&typeof f.plugins[n]==t)g=f.plugins[n].description,g&&(typeof f.mimeTypes==e||!f.mimeTypes[i]||!!f.mimeTypes[i].enabledPlugin)&&(l=!0,v=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),m[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),m[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),m[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof u.ActiveXObject!=e)try{var y=new ActiveXObject(r);y&&(g=y.GetVariable("$version"),g&&(v=!0,g=g.split(" ")[1].split(","),m=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]))}catch(b){}return{w3:s,pv:m,wk:d,ie:v,win:h,mac:p}}(),N=function(){if(!T.w3)return;(typeof a.readyState!=e&&a.readyState=="complete"||typeof a.readyState==e&&(a.getElementsByTagName("body")[0]||a.body))&&C(),b||(typeof a.addEventListener!=e&&a.addEventListener("DOMContentLoaded",C,!1),T.ie&&T.win&&(a.attachEvent(o,function(){a.readyState=="complete"&&(a.detachEvent(o,arguments.callee),C())}),u==top&&!function(){if(b)return;try{a.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}C()}()),T.wk&&!function(){if(b)return;if(!/loaded|complete/.test(a.readyState)){setTimeout(arguments.callee,0);return}C()}(),L(C))}(),J=function(){T.ie&&T.win&&window.attachEvent("onunload",function(){var e=d.length;for(var t=0;t<e;t++)d[t][0].detachEvent(d[t][1],d[t][2]);var n=p.length;for(var r=0;r<n;r++)I(p[r]);for(var i in T)T[i]=null;T=null;for(var s in swfobject)swfobject[s]=null;swfobject=null})}();return{registerObject:function(e,t,n,r){if(T.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=r,h[h.length]=i,V(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){if(T.w3)return _(e)},embedSWF:function(n,r,i,s,o,u,a,f,l,c){var h={success:!1,id:r};T.w3&&!(T.wk&&T.wk<312)&&n&&r&&i&&s&&o?(V(r,!1),k(function(){i+="",s+="";var p={};if(l&&typeof l===t)for(var d in l)p[d]=l[d];p.data=n,p.width=i,p.height=s;var v={};if(f&&typeof f===t)for(var m in f)v[m]=f[m];if(a&&typeof a===t)for(var g in a)typeof v.flashvars!=e?v.flashvars+="&"+g+"="+a[g]:v.flashvars=g+"="+a[g];if(W(o)){var y=j(p,v,r);p.id==r&&V(r,!0),h.success=!0,h.ref=y}else{if(u&&D()){p.data=u,P(p,v,r,c);return}V(r,!0)}c&&c(h)})):c&&c(h)},switchOffAutoHideShow:function(){x=!1},ua:T,getFlashPlayerVersion:function(){return{major:T.pv[0],minor:T.pv[1],release:T.pv[2]}},hasFlashPlayerVersion:W,createSWF:function(e,t,n){return T.w3?j(e,t,n):undefined},showExpressInstall:function(e,t,n,r){T.w3&&D()&&P(e,t,n,r)},removeSWF:function(e){T.w3&&I(e)},createCSS:function(e,t,n,r){T.w3&&X(e,t,n,r)},addDomLoadEvent:k,addLoadEvent:L,getQueryParamValue:function(e){var t=a.location.search||a.location.hash;if(t){/\?/.test(t)&&(t=t.split("?")[1]);if(e==null)return $(t);var n=t.split("&");for(var r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return $(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(w){var e=R(s);e&&v&&(e.parentNode.replaceChild(v,e),m&&(V(m,!0),T.ie&&T.win&&(v.style.display="block")),g&&g(y)),w=!1}}}}();var __hasProp=Object.prototype.hasOwnProperty;window.SC=window.SC||{},window.SC.URI=function(e,t){var n,r;return e==null&&(e=""),t==null&&(t={}),r=/^(?:([^:\/?\#]+):)?(?:\/\/([^\/?\#]*))?([^?\#]*)(?:\?([^\#]*))?(?:\#(.*))?/,n=/^(?:([^@]*)@)?([^:]*)(?::(\d*))?/,this.scheme=this.user=this.password=this.host=this.port=this.path=this.query=this.fragment=null,this.toString=function(){var e;return e="",this.isAbsolute()&&(e+=this.scheme,e+="://",this.user!=null&&(e+=this.user+":"+this.password+"@"),e+=this.host,this.port!=null&&(e+=":"+this.port)),e+=this.path,this.path===""&&(this.query!=null||this.fragment!=null)&&(e+="/"),this.query!=null&&(e+=this.encodeParamsWithPrepend(this.query,"?")),this.fragment!=null&&(e+=this.encodeParamsWithPrepend(this.fragment,"#")),e},this.isRelative=function(){return!this.isAbsolute()},this.isAbsolute=function(){return this.host!=null},this.decodeParams=function(e){var t,n,r,i,s,o,u,a;e==null&&(e=""),n={},a=e.split("&");for(o=0,u=a.length;o<u;o++)r=a[o],r!==""&&(i=r.split("="),t=decodeURIComponent(i[0]),s=decodeURIComponent(i[1]||"").replace(/\+/g," "),this.normalizeParams(n,t,s));return n},this.normalizeParams=function(e,t,n){var r,i,s,o,u,a;return n==null&&(n=NULL),u=t.match(/^[\[\]]*([^\[\]]+)\]*(.*)/),s=u[1]||"",r=u[2]||"",r===""?e[s]=n:r==="[]"?(e[s]||(e[s]=[]),e[s].push(n)):(a=r.match(/^\[\]\[([^\[\]]+)\]$/)||(a=r.match(/^\[\](.+)$/)))?(i=a[1],e[s]||(e[s]=[]),o=e[s][e[s].length-1],o!=null&&o.constructor===Object&&o[i]==null?this.normalizeParams(o,i,n):e[s].push(this.normalizeParams({},i,n))):(e[s]||(e[s]={}),e[s]=this.normalizeParams(e[s],r,n)),e},this.encodeParamsWithPrepend=function(e,t){var n;return n=this.encodeParams(e),n!==""?t+n:""},this.encodeParams=function(e){var t,n,r,i,s,o,u,a;s="";if(e.constructor===String)return s=e;t=this.flattenParams(e),r=[];for(u=0,a=t.length;u<a;u++)i=t[u],n=i[0],o=i[1],o===null?r.push(n):r.push(n+"="+encodeURIComponent(o));return s=r.join("&")},this.flattenParams=function(e,t,n){var r,i,s,o,u;t==null&&(t=""),n==null&&(n=[]);if(e==null)t!=null&&n.push([t,null]);else if(e.constructor===Object)for(r in e){if(!__hasProp.call(e,r))continue;s=e[r],t!==""?i=t+"["+r+"]":i=r,this.flattenParams(s,i,n)}else if(e.constructor===Array)for(o=0,u=e.length;o<u;o++)s=e[o],this.flattenParams(s,t+"[]",n);else t!==""&&n.push([t,e]);return n},this.parse=function(e,t){var i,s,o,u,a;e==null&&(e=""),t==null&&(t={}),o=function(e){return e===""?null:e},u=e.match(r),this.scheme=o(u[1]),i=u[2],i!=null&&(s=i.match(n),a=o(s[1]),a!=null&&(this.user=a.split(":")[0],this.password=a.split(":")[1]),this.host=o(s[2]),this.port=parseInt(s[3],10)||null),this.path=u[3],this.query=o(u[4]),t.decodeQuery&&(this.query=this.decodeParams(this.query)),this.fragment=o(u[5]);if(t.decodeFragment)return this.fragment=this.decodeParams(this.fragment)},this.parse(e.toString(),t),this},!function(){var AbstractDialog,ConnectDialog,EchoDialog,PickerDialog,_ref,_ref1,_ref2,__hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};window.SC||(window.SC={}),SC.Helper={merge:function(e,t){var n,r,i,s,o;if(e.constructor===Array){r=Array.apply(null,e);for(s=0,o=t.length;s<o;s++)i=t[s],r.push(i);return r}r={};for(n in e){if(!__hasProp.call(e,n))continue;i=e[n],r[n]=i}for(n in t){if(!__hasProp.call(t,n))continue;i=t[n],r[n]=i}return r},groupBy:function(e,t){var n,r,i,s,o,u;n={};for(s=0,o=e.length;s<o;s++){r=e[s];if(i=r[t])n[u=r[t]]||(n[u]=[]),n[r[t]].push(r)}return n},loadJavascript:function(e,t){var n;return n=document.createElement("script"),n.async=!0,n.src=e,SC.Helper.attachLoadEvent(n,t),document.body.appendChild(n),n},extractOptionsAndCallbackArguments:function(e,t){var n;return n={},t!=null?(n.callback=t,n.options=e):typeof e=="function"?(n.callback=e,n.options={}):n.options=e||{},n},openCenteredPopup:function(e,t,n){var r;return r={},n!=null?(r.width=t,r.height=n):r=t,r=SC.Helper.merge(r,{location:1,left:window.screenX+(window.outerWidth-r.width)/2,top:window.screenY+(window.outerHeight-r.height)/2,toolbar:"no",scrollbars:"yes"}),window.open(e,r.name,this._optionsToString(r))},_optionsToString:function(e){var t,n,r;n=[];for(t in e){if(!__hasProp.call(e,t))continue;r=e[t],n.push(t+"="+r)}return n.join(", ")},attachLoadEvent:function(e,t){return e.addEventListener?e.addEventListener("load",t,!1):e.onreadystatechange=function(){if(this.readyState==="complete")return t()}},millisecondsToHMS:function(e){var t,n,r,i,s;return t={h:Math.floor(e/36e5),m:Math.floor(e/6e4%60),s:Math.floor(e/1e3%60)},s=[],t.h>0&&s.push(t.h),n=t.m,r="",i="",t.m<10&&t.h>0&&(r="0"),t.s<10&&(i="0"),s.push(r+t.m),s.push(i+t.s),s.join(".")},setFlashStatusCodeMaps:function(e){return e["_status_code_map[400]"]=200,e["_status_code_map[401]"]=200,e["_status_code_map[403]"]=200,e["_status_code_map[404]"]=200,e["_status_code_map[422]"]=200,e["_status_code_map[500]"]=200,e["_status_code_map[503]"]=200,e["_status_code_map[504]"]=200},responseHandler:function(e,t){var n,r;return r=SC.Helper.JSON.parse(e),n=null,r?r.errors&&(n={message:r.errors&&r.errors[0].error_message}):t?n={message:"HTTP Error: "+t.status}:n={message:"Unknown error"},{json:r,error:n}},FakeStorage:function(){return{_store:{},getItem:function(e){return this._store[e]||null},setItem:function(e,t){return this._store[e]=t.toString()},removeItem:function(e){return delete this._store[e]}}},JSON:{parse:function(string){return string[0]!=="{"&&string[0]!=="["?null:window.JSON!=null?window.JSON.parse(string):eval(string)}}},window.SC=SC.Helper.merge(SC||{},{_version:"1.1.5",_baseUrl:"//connect.soundcloud.com",options:{site:"soundcloud.com",baseUrl:"//connect.soundcloud.com"},connectCallbacks:{},_popupWindow:void 0,initialize:function(e){var t,n,r;e==null&&(e={}),this.accessToken(e.access_token);for(t in e){if(!__hasProp.call(e,t))continue;n=e[t],this.options[t]=n}return(r=this.options).flashXHR||(r.flashXHR=(new XMLHttpRequest).withCredentials===void 0),this},hostname:function(e){var t;return t="",e!=null&&(t+=e+"."),t+=this.options.site,t}}),window.SC=SC.Helper.merge(SC||{},{_apiRequest:function(e,t,n,r){var i,s;r==null&&(r=n,n=void 0),n||(n={}),s=SC.prepareRequestURI(t,n),s.query.format="json",SC.options.flashXHR?SC.Helper.setFlashStatusCodeMaps(s.query):s.query["_status_code_map[302]"]=200;if(e==="PUT"||e==="DELETE")s.query._method=e,e="POST";return e!=="GET"&&(i=s.encodeParams(s.query),s.query={}),this._request(e,s,"application/x-www-form-urlencoded",i,function(e,t){var n;return n=SC.Helper.responseHandler(e,t),n.json&&n.json.status==="302 - Found"?SC._apiRequest("GET",n.json.location,r):r(n.json,n.error)})},_request:function(e,t,n,r,i){return SC.options.flashXHR?this._flashRequest(e,t,n,r,i):this._xhrRequest(e,t,n,r,i)},_xhrRequest:function(e,t,n,r,i){var s;return s=new XMLHttpRequest,s.open(e,t.toString(),!0),s.setRequestHeader("Content-Type",n),s.onreadystatechange=function(e){if(e.target.readyState===4)return i(e.target.responseText,e.target)},s.send(r)},_flashRequest:function(e,t,n,r,i){return this.whenRecordingReady(function(){return Recorder.request(e,t.toString(),n,r,function(e,t){return i(Recorder._externalInterfaceDecode(e),t)})})},post:function(e,t,n){return this._apiRequest("POST",e,t,n)},put:function(e,t,n){return this._apiRequest("PUT",e,t,n)},get:function(e,t,n){return this._apiRequest("GET",e,t,n)},"delete":function(e,t){return this._apiRequest("DELETE",e,{},t)},prepareRequestURI:function(e,t){var n,r,i;t==null&&(t={}),r=new SC.URI(e,{decodeQuery:!0});for(n in t){if(!__hasProp.call(t,n))continue;i=t[n],r.query[n]=i}return r.isRelative()&&(r.host=this.hostname("api"),r.scheme=window.location.protocol.slice(0,-1)),this.accessToken()!=null?(r.query.oauth_token=this.accessToken(),r.scheme="https"):r.query.client_id=this.options.client_id,r},_getAll:function(e,t,n,r){return r==null&&(r=[]),n==null&&(n=t,t=void 0),t||(t={}),t.offset||(t.offset=0),t.limit||(t.limit=50),this.get(e,t,function(i,s){return i.constructor===Array&&i.length>0?(r=SC.Helper.merge(r,i),t.offset+=t.limit,SC._getAll(e,t,n,r)):n(r,null)})}}),window.SC=SC.Helper.merge(SC||{},{_connectWindow:null,connect:function(e){var t,n,r;typeof e=="function"?r={connected:e}:r=e,n={client_id:r.client_id||SC.options.client_id,redirect_uri:r.redirect_uri||SC.options.redirect_uri,response_type:"code_and_token",scope:r.scope||"non-expiring",display:"popup",window:r.window,retainWindow:r.retainWindow};if(n.client_id&&n.redirect_uri)return t=SC.dialog(SC.Dialog.CONNECT,n,function(e){if(e.error!=null)throw new Error("SC OAuth2 Error: "+e.error_description);SC.accessToken(e.access_token),r.connected!=null&&r.connected();if(r.callback!=null)return r.callback()}),this._connectWindow=t.options.window,t;throw"Options client_id and redirect_uri must be passed"},connectCallback:function(){return SC.Dialog._handleDialogReturn(SC._connectWindow)},disconnect:function(){return this.accessToken(null)},_trigger:function(e,t){if(this.connectCallbacks[e]!=null)return this.connectCallbacks[e](t)},accessToken:function(e){var t,n;return n="SC.accessToken",t=this.storage(),e===void 0?t.getItem(n):e===null?t.removeItem(n):t.setItem(n,e)},isConnected:function(){return this.accessToken()!=null}}),window.SC=SC.Helper.merge(SC||{},{_dialogsPath:"/dialogs",dialog:function(e,t,n){var r,i,s;return r=SC.Helper.extractOptionsAndCallbackArguments(t,n),s=r.options,n=r.callback,s.callback=n,s.redirect_uri=this.options.redirect_uri,i=new SC.Dialog[e+"Dialog"](s),SC.Dialog._dialogs[i.id]=i,i.open(),i},Dialog:{ECHO:"Echo",CONNECT:"Connect",PICKER:"Picker",ID_PREFIX:"SoundCloud_Dialog",_dialogs:{},_isDialogId:function(e){return(e||"").match(new RegExp("^"+this.ID_PREFIX))},_getDialogIdFromWindow:function(e){var t,n;return n=new SC.URI(e.location,{decodeQuery:!0,decodeFragment:!0}),t=n.query.state||n.fragment.state,this._isDialogId(t)?t:null},_handleDialogReturn:function(e){var t,n;n=this._getDialogIdFromWindow(e),t=this._dialogs[n];if(t!=null&&t.handleReturn())return delete this._dialogs[n]},_handleInPopupContext:function(){var e;if(this._getDialogIdFromWindow(window)&&!window.location.pathname.match(/\/dialogs\//)){e=navigator.userAgent.match(/OS 5(_\d)+ like Mac OS X/i);if(e)return window.opener.SC.Dialog._handleDialogReturn(window);if(window.opener)return window.opener.setTimeout(function(){return window.opener.SC.Dialog._handleDialogReturn(window)},1);if(window.top)return window.top.setTimeout(function(){return window.top.SC.Dialog._handleDialogReturn(window)},1)}},AbstractDialog:AbstractDialog=function(){function e(e){this.options=e!=null?e:{},this.id=this.generateId()}return e.prototype.WIDTH=456,e.prototype.HEIGHT=510,e.prototype.ID_PREFIX="SoundCloud_Dialog",e.prototype.PARAM_KEYS=["redirect_uri"],e.prototype.requiresAuthentication=!1,e.prototype.generateId=function(){return[this.ID_PREFIX,Math.ceil(Math.random()*1e6).toString(16)].join("_")},e.prototype.buildURI=function(e){var t,n,r,i;e==null&&(e=new SC.URI(SC._baseUrl)),e.scheme=window.location.protocol.slice(0,-1),e.path+=SC._dialogsPath+"/"+this.name+"/",e.fragment={state:this.id},this.requiresAuthentication&&(e.fragment.access_token=SC.accessToken()),i=this.PARAM_KEYS;for(n=0,r=i.length;n<r;n++)t=i[n],this.options[t]!=null&&(e.fragment[t]=this.options[t]);return e.port=null,e},e.prototype.open=function(){var e;return this.requiresAuthentication&&SC.accessToken()==null?this.authenticateAndOpen():(e=this.buildURI(),this.options.window!=null?this.options.window.location=e:this.options.window=SC.Helper.openCenteredPopup(e,{width:this.WIDTH,height:this.HEIGHT}))},e.prototype.authenticateAndOpen=function(){var e,t=this;return e=SC.connect({retainWindow:!0,window:this.options.window,connected:function(){return t.options.window=e.options.window,t.open()}})},e.prototype.paramsFromWindow=function(){var e,t;return t=new SC.URI(this.options.window.location,{decodeFragment:!0,decodeQuery:!0}),e=SC.Helper.merge(t.query,t.fragment)},e.prototype.handleReturn=function(){var e;return e=this.paramsFromWindow(),this.options.retainWindow||this.options.window.close(),this.options.callback(e)},e}(),EchoDialog:EchoDialog=function(e){function t(){return _ref=t.__super__.constructor.apply(this,arguments),_ref}return __extends(t,e),t.prototype.PARAM_KEYS=["client_id","redirect_uri","hello"],t.prototype.name="echo",t}(AbstractDialog),PickerDialog:PickerDialog=function(e){function t(){return _ref1=t.__super__.constructor.apply(this,arguments),_ref1}return __extends(t,e),t.prototype.PARAM_KEYS=["client_id","redirect_uri"],t.prototype.name="picker",t.prototype.requiresAuthentication=!0,t.prototype.handleReturn=function(){var e,t=this;e=this.paramsFromWindow();if(e.action==="logout")return SC.accessToken(null),this.open(),!1;if(e.track_uri!=null)return this.options.retainWindow||this.options.window.close(),SC.get(e.track_uri,function(e){return t.options.callback({track:e})}),!0},t}(AbstractDialog),ConnectDialog:ConnectDialog=function(e){function t(){return _ref2=t.__super__.constructor.apply(this,arguments),_ref2}return __extends(t,e),t.prototype.PARAM_KEYS=["client_id","redirect_uri","client_secret","response_type","scope","display"],t.prototype.name="connect",t.prototype.buildURI=function(){var e;return e=t.__super__.buildURI.apply(this,arguments),e.scheme="https",e.host="soundcloud.com",e.path="/connect",e.query=e.fragment,e.fragment={},e},t}(AbstractDialog)}}),SC.Dialog._handleInPopupContext(),window.SC=SC.Helper.merge(SC||{},{Loader:{States:{UNLOADED:1,LOADING:2,READY:3},Package:function(e,t){return{name:e,callbacks:[],loadFunction:t,state:SC.Loader.States.UNLOADED,addCallback:function(e){return this.callbacks.push(e)},runCallbacks:function(){var e,t,n,r;r=this.callbacks;for(t=0,n=r.length;t<n;t++)e=r[t],e.apply(this);return this.callbacks=[]},setReady:function(){return this.state=SC.Loader.States.READY,this.runCallbacks()},load:function(){return this.state=SC.Loader.States.LOADING,this.loadFunction.apply(this)},whenReady:function(e){switch(this.state){case SC.Loader.States.UNLOADED:return this.addCallback(e),this.load();case SC.Loader.States.LOADING:return this.addCallback(e);case SC.Loader.States.READY:return e()}}}},packages:{},registerPackage:function(e){return this.packages[e.name]=e}}}),window.SC=SC.Helper.merge(SC||{},{oEmbed:function(e,t,n){var r,i,s=this;return n==null&&(n=t,t=void 0),t||(t={}),t.url=e,i=new SC.URI(window.location.protocol+"//"+SC.hostname()+"/oembed.json"),i.query=t,n.nodeType!==void 0&&n.nodeType===1&&(r=n,n=function(e){return r.innerHTML=e.html}),this._request("GET",i.toString(),null,null,function(e,t){var r;return r=SC.Helper.responseHandler(e,t),n(r.json,r.error)})}}),window.SC=SC.Helper.merge(SC||{},{_recorderSwfPath:"/recorder.js/recorder-0.9.0.swf",whenRecordingReady:function(e){return SC.Loader.packages.recording.whenReady(e)},record:function(e){return e==null&&(e={}),this.whenRecordingReady(function(){return Recorder.record(e)})},recordStop:function(e){return e==null&&(e={}),Recorder.stop()},recordPlay:function(e){return e==null&&(e={}),Recorder.play(e)},recordUpload:function(e,t){var n,r;return e==null&&(e={}),r=SC.prepareRequestURI("/tracks",e),r.query.format="json",SC.Helper.setFlashStatusCodeMaps(r.query),n=r.flattenParams(r.query),Recorder.upload({method:"POST",url:"https://"+this.hostname("api")+"/tracks",audioParam:"track[asset_data]",params:n,success:function(e){var n;return n=SC.Helper.responseHandler(e),t(n.json,n.error)}})}}),SC.Loader.registerPackage(new SC.Loader.Package("recording",function(){return Recorder.flashInterface()?SC.Loader.packages.recording.setReady():Recorder.initialize({swfSrc:SC._baseUrl+SC._recorderSwfPath+"?"+SC._version,initialized:function(){return SC.Loader.packages.recording.setReady()}})})),window.SC=SC.Helper.merge(SC||{},{storage:function(){return this._fakeStorage||(this._fakeStorage=new SC.Helper.FakeStorage)}}),window.SC=SC.Helper.merge(SC||{},{_soundmanagerPath:"/soundmanager2",_soundmanagerScriptPath:"/soundmanager2.js",whenStreamingReady:function(e){return SC.Loader.packages.streaming.whenReady(e)},_prepareStreamUrl:function(e){var t,n;return e.toString().match(/^\d.*$/)?n="/tracks/"+e:n=e,t=SC.prepareRequestURI(n),t.path.match(/\/stream/)||(t.path+="/stream"),t.toString()},_setOnPositionListenersForComments:function(e,t,n){var r,i,s,o;i=SC.Helper.groupBy(t,"timestamp"),o=[];for(s in i)r=i[s],o.push(function(t,n,r){return e.onposition(parseInt(t,10),function(){return r(n)})}(s,r,n));return o},stream:function(e,t,n){var r,i,s=this;return r=SC.Helper.extractOptionsAndCallbackArguments(t,n),i=r.options,n=r.callback,SC.whenStreamingReady(function(){var t,r;return i.id="T"+e+"-"+Math.random(),i.url=s._prepareStreamUrl(e),t=function(e){var t;return t=soundManager.createSound(e),n!=null&&n(t),t},(r=i.ontimedcomments)?(delete i.ontimedcomments,SC._getAll(i.url.replace("/stream","/comments"),function(e){var n;return n=t(i),s._setOnPositionListenersForComments(n,e,r)})):t(i)})},streamStopAll:function(){if(window.soundManager!=null)return window.soundManager.stopAll()}}),SC.Loader.registerPackage(new SC.Loader.Package("streaming",function(){var e;return window.soundManager!=null?SC.Loader.packages.streaming.setReady():(e=SC._baseUrl+SC._soundmanagerPath,window.SM2_DEFER=!0,SC.Helper.loadJavascript(e+SC._soundmanagerScriptPath,function(){return window.soundManager=new SoundManager,soundManager.url=e,soundManager.flashVersion=9,soundManager.useFlashBlock=!1,soundManager.useHTML5Audio=!1,soundManager.beginDelayedInit(),soundManager.onready(function(){return SC.Loader.packages.streaming.setReady()})}))}))}.call(this);