/** @license
 *
 * SoundManager 2: JavaScript Sound for the Web
 * ----------------------------------------------
 * http://schillmania.com/projects/soundmanager2/
 *
 * Copyright (c) 2007, Scott Schiller. All rights reserved.
 * Code provided under the BSD License:
 * http://schillmania.com/projects/soundmanager2/license.txt
 *
 * V2.97a.20111220
 */

(function(e){function t(t,n){function r(e){return function(t){var n=this._t;return!n||!n._a?null:e.call(this,t)}}this.flashVersion=8,this.debugFlash=this.debugMode=!1,this.consoleOnly=this.useConsole=!0,this.waitForWindowLoad=!1,this.bgColor="#ffffff",this.useHighPerformance=!1,this.html5PollingInterval=this.flashPollingInterval=null,this.flashLoadTimeout=1e3,this.wmode=null,this.allowScriptAccess="always",this.useFlashBlock=!1,this.useHTML5Audio=!0,this.html5Test=/^(probably|maybe)$/i,this.preferFlash=!0,this.noSWFCache=!1,this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.movieID="sm2-container",this.id=n||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20111220",this.movieURL=this.version=null,this.url=t||null,this.altURL=null,this.enabled=this.swfLoaded=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.didFlashBlock=this.muted=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={};var i;try{i="undefined"!=typeof Audio&&"undefined"!=typeof (new Audio).canPlayType}catch(s){i=!1}this.hasHTML5=i,this.html5={usingFlash:null},this.flash={},this.ignoreFlash=this.html5Only=!1;var o,u=this,a=null,f,l=navigator.userAgent,c=e,h=c.location.href.toString(),p=document,d,v,m,g=[],y=!1,b=!1,w=!1,E=!1,S=!1,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W=null,X=null,V,$,K,Q,G,Y,Z,et=!1,tt=!1,nt,rt,it,st=0,ot=null,ut,at=null,ft,lt,ct,ht,pt,dt,vt,mt,gt=Array.prototype.slice,yt=!1,bt,wt,Et,St,xt,Tt=l.match(/(ipad|iphone|ipod)/i),Nt=l.match(/firefox/i),Ct=l.match(/droid/i),kt=l.match(/msie/i),Lt=l.match(/webkit/i),At=l.match(/safari/i)&&!l.match(/chrome/i),Ot=l.match(/opera/i),Mt=l.match(/(mobile|pre\/|xoom)/i)||Tt,_t=!h.match(/usehtml5audio/i)&&!h.match(/sm2\-ignorebadua/i)&&At&&!l.match(/silk/i)&&l.match(/OS X 10_6_([3-7])/i),Dt="undefined"!=typeof p.hasFocus?p.hasFocus():null,Pt=At&&"undefined"==typeof p.hasFocus,Ht=!Pt,Bt=/(mp3|mp4|mpa)/i,jt=p.location?p.location.protocol.match(/http/i):null,Ft=jt?"":"http://",It=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|mp4v|3gp|3g2)\s*(?:$|;)/i,qt="mpeg4,aac,flv,mov,mp4,m4v,f4v,m4a,mp4v,3gp,3g2".split(","),Rt=RegExp("\\.("+qt.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!jt,this._global_a=null,Mt&&(u.useHTML5Audio=!0,u.preferFlash=!1,Tt)&&(yt=u.ignoreFlash=!0),this.supported=this.ok=function(){return at?w&&!E:u.useHTML5Audio&&u.hasHTML5},this.getMovie=function(e){return f(e)||p[e]||c[e]},this.createSound=function(e){function t(){return n=Q(n),u.sounds[i.id]=new o(i),u.soundIDs.push(i.id),u.sounds[i.id]}var n=null,r=null,i=null;if(!w||!u.ok())return Y(void 0),!1;2===arguments.length&&(e={id:arguments[0],url:arguments[1]}),n=T(e),n.url=ut(n.url),i=n;if(Z(i.id,!0))return u.sounds[i.id];if(lt(i))r=t(),r._setup_html5(i);else{8<m&&(null===i.isMovieStar&&(i.isMovieStar=i.serverURL||(i.type?i.type.match(It):!1)||i.url.match(Rt)),i.isMovieStar&&i.usePeakData&&(i.usePeakData=!1)),i=G(i,void 0),r=t();if(8===m)a._createSound(i.id,i.loops||1,i.usePolicyFile);else if(a._createSound(i.id,i.url,i.usePeakData,i.useWaveformData,i.useEQData,i.isMovieStar,i.isMovieStar?i.bufferTime:!1,i.loops||1,i.serverURL,i.duration||null,i.autoPlay,!0,i.autoLoad,i.usePolicyFile),!i.serverURL)r.connected=!0,i.onconnect&&i.onconnect.apply(r);!i.serverURL&&(i.autoLoad||i.autoPlay)&&r.load(i)}return!i.serverURL&&i.autoPlay&&r.play(),r},this.destroySound=function(e,t){if(!Z(e))return!1;var n=u.sounds[e],r;n._iO={},n.stop(),n.unload();for(r=0;r<u.soundIDs.length;r++)if(u.soundIDs[r]===e){u.soundIDs.splice(r,1);break}return t||n.destruct(!0),delete u.sounds[e],!0},this.load=function(e,t){return Z(e)?u.sounds[e].load(t):!1},this.unload=function(e){return Z(e)?u.sounds[e].unload():!1},this.onposition=this.onPosition=function(e,t,n,r){return Z(e)?u.sounds[e].onposition(t,n,r):!1},this.clearOnPosition=function(e,t,n){return Z(e)?u.sounds[e].clearOnPosition(t,n):!1},this.start=this.play=function(e,t){return!w||!u.ok()?(Y("soundManager.play(): "+V(w?"notOK":"notReady")),!1):Z(e)?u.sounds[e].play(t):(t instanceof Object||(t={url:t}),t&&t.url?(t.id=e,u.createSound(t).play()):!1)},this.setPosition=function(e,t){return Z(e)?u.sounds[e].setPosition(t):!1},this.stop=function(e){return Z(e)?u.sounds[e].stop():!1},this.stopAll=function(){for(var e in u.sounds)u.sounds.hasOwnProperty(e)&&u.sounds[e].stop()},this.pause=function(e){return Z(e)?u.sounds[e].pause():!1},this.pauseAll=function(){var e;for(e=u.soundIDs.length;e--;)u.sounds[u.soundIDs[e]].pause()},this.resume=function(e){return Z(e)?u.sounds[e].resume():!1},this.resumeAll=function(){var e;for(e=u.soundIDs.length;e--;)u.sounds[u.soundIDs[e]].resume()},this.togglePause=function(e){return Z(e)?u.sounds[e].togglePause():!1},this.setPan=function(e,t){return Z(e)?u.sounds[e].setPan(t):!1},this.setVolume=function(e,t){return Z(e)?u.sounds[e].setVolume(t):!1},this.mute=function(e){var t=0;"string"!=typeof e&&(e=null);if(e)return Z(e)?u.sounds[e].mute():!1;for(t=u.soundIDs.length;t--;)u.sounds[u.soundIDs[t]].mute();return u.muted=!0},this.muteAll=function(){u.mute()},this.unmute=function(e){"string"!=typeof e&&(e=null);if(e)return Z(e)?u.sounds[e].unmute():!1;for(e=u.soundIDs.length;e--;)u.sounds[u.soundIDs[e]].unmute();return u.muted=!1,!0},this.unmuteAll=function(){u.unmute()},this.toggleMute=function(e){return Z(e)?u.sounds[e].toggleMute():!1},this.getMemoryUse=function(){var e=0;return a&&8!==m&&(e=parseInt(a._getMemoryUse(),10)),e},this.disable=function(e){var t;"undefined"==typeof e&&(e=!1);if(E)return!1;E=!0;for(t=u.soundIDs.length;t--;)R(u.sounds[u.soundIDs[t]]);return x(e),mt.remove(c,"load",k),!0},this.canPlayMIME=function(e){var t;return u.hasHTML5&&(t=ct({type:e})),!at||t?t:e?!!(8<m&&e.match(It)||e.match(u.mimePattern)):null},this.canPlayURL=function(e){var t;return u.hasHTML5&&(t=ct({url:e})),!at||t?t:e?!!e.match(u.filePattern):null},this.canPlayLink=function(e){return"undefined"!=typeof e.type&&e.type&&u.canPlayMIME(e.type)?!0:u.canPlayURL(e.href)},this.getSoundById=function(e){if(!e)throw Error("soundManager.getSoundById(): sID is null/undefined");return u.sounds[e]},this.onready=function(e,t){if(e&&e instanceof Function)return t||(t=c),N("onready",e,t),C(),!0;throw V("needFunction","onready")},this.ontimeout=function(e,t){if(e&&e instanceof Function)return t||(t=c),N("ontimeout",e,t),C({type:"ontimeout"}),!0;throw V("needFunction","ontimeout")},this._wD=this._writeDebug=function(){return!0},this._debug=function(){},this.reboot=function(){var e,t;for(e=u.soundIDs.length;e--;)u.sounds[u.soundIDs[e]].destruct();try{kt&&(X=a.innerHTML),W=a.parentNode.removeChild(a)}catch(n){}X=W=at=null,u.enabled=H=w=et=tt=y=b=E=u.swfLoaded=!1,u.soundIDs=u.sounds=[],a=null;for(e in g)if(g.hasOwnProperty(e))for(t=g[e].length;t--;)g[e][t].fired=!1;c.setTimeout(u.beginDelayedInit,20)},this.getMoviePercent=function(){return a&&"undefined"!=typeof a.PercentLoaded?a.PercentLoaded():null},this.beginDelayedInit=function(){S=!0,D(),setTimeout(function(){return tt?!1:(j(),_(),tt=!0)},20),L()},this.destruct=function(){u.disable(!0)},o=function(e){var t=this,n,r,i,s,o,f,l=!1,c=[],h=0,p,d,v=null,g=null,y=null;this.sID=e.id,this.url=e.url,this._iO=this.instanceOptions=this.options=T(e),this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,this.id3={},this._debug=function(){},this.load=function(e){var n=null;if("undefined"!=typeof e)t._iO=T(e,t.options),t.instanceOptions=t._iO;else if(e=t.options,t._iO=e,t.instanceOptions=t._iO,v&&v!==t.url)t._iO.url=t.url,t.url=null;t._iO.url||(t._iO.url=t.url),t._iO.url=ut(t._iO.url);if(t._iO.url===t.url&&0!==t.readyState&&2!==t.readyState)return 3===t.readyState&&t._iO.onload&&t._iO.onload.apply(t,[!!t.duration]),t;e=t._iO,v=t.url,t.loaded=!1,t.readyState=1,t.playState=0;if(lt(e)){if(n=t._setup_html5(e),!n._called_load)t._html5_canplay=!1,t._a.autobuffer="auto",t._a.preload="auto",n.load(),n._called_load=!0,e.autoPlay&&t.play()}else try{t.isHTML5=!1,t._iO=G(Q(e)),e=t._iO,8===m?a._load(t.sID,e.url,e.stream,e.autoPlay,e.whileloading?1:0,e.loops||1,e.usePolicyFile):a._load(t.sID,e.url,!!e.stream,!!e.autoPlay,e.loops||1,!!e.autoLoad,e.usePolicyFile)}catch(r){F({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}return t},this.unload=function(){return 0!==t.readyState&&(t.isHTML5?(s(),t._a&&(t._a.pause(),pt(t._a))):8===m?a._unload(t.sID,"about:blank"):a._unload(t.sID),n()),t},this.destruct=function(e){if(t.isHTML5){if(s(),t._a)t._a.pause(),pt(t._a),yt||i(),t._a._t=null,t._a=null}else t._iO.onfailure=null,a._destroySound(t.sID);e||u.destroySound(t.sID,!0)},this.start=this.play=function(e,n){var r,n=void 0===n?!0:n;e||(e={}),t._iO=T(e,t._iO),t._iO=T(t._iO,t.options),t._iO.url=ut(t._iO.url),t.instanceOptions=t._iO;if(t._iO.serverURL&&!t.connected)return t.getAutoPlay()||t.setAutoPlay(!0),t;lt(t._iO)&&(t._setup_html5(t._iO),o());if(1===t.playState&&!t.paused&&(r=t._iO.multiShot,!r))return t;if(!t.loaded)if(0===t.readyState)t.isHTML5||(t._iO.autoPlay=!0),t.load(t._iO);else if(2===t.readyState)return t;!t.isHTML5&&9===m&&0<t.position&&t.position===t.duration&&(e.position=0);if(t.paused&&t.position&&0<t.position)t.resume();else{t._iO=T(e,t._iO);if(null!==t._iO.from&&null!==t._iO.to&&0===t.instanceCount&&0===t.playState&&!t._iO.serverURL){r=function(){t._iO=T(e,t._iO),t.play(t._iO)};if(t.isHTML5&&!t._html5_canplay)return t.load({_oncanplay:r}),!1;if(!t.isHTML5&&!t.loaded&&(!t.readyState||2!==t.readyState))return t.load({onload:r}),!1;t._iO=d()}(!t.instanceCount||t._iO.multiShotEvents||!t.isHTML5&&8<m&&!t.getAutoPlay())&&t.instanceCount++,0===t.playState&&t._iO.onposition&&f(t),t.playState=1,t.paused=!1,t.position="undefined"!=typeof t._iO.position&&!isNaN(t._iO.position)?t._iO.position:0,t.isHTML5||(t._iO=G(Q(t._iO))),t._iO.onplay&&n&&(t._iO.onplay.apply(t),l=!0),t.setVolume(t._iO.volume,!0),t.setPan(t._iO.pan,!0),t.isHTML5?(o(),r=t._setup_html5(),t.setPosition(t._iO.position),r.play()):a._start(t.sID,t._iO.loops||1,9===m?t._iO.position:t._iO.position/1e3)}return t},this.stop=function(e){var n=t._iO;return 1===t.playState&&(t._onbufferchange(0),t._resetOnPosition(0),t.paused=!1,t.isHTML5||(t.playState=0),p(),n.to&&t.clearOnPosition(n.to),t.isHTML5?t._a&&(e=t.position,t.setPosition(0),t.position=e,t._a.pause(),t.playState=0,t._onTimer(),s()):(a._stop(t.sID,e),n.serverURL&&t.unload()),t.instanceCount=0,t._iO={},n.onstop&&n.onstop.apply(t)),t},this.setAutoPlay=function(e){t._iO.autoPlay=e,t.isHTML5||(a._setAutoPlay(t.sID,e),e&&!t.instanceCount&&1===t.readyState&&t.instanceCount++)},this.getAutoPlay=function(){return t._iO.autoPlay},this.setPosition=function(e){void 0===e&&(e=0);var n=t.isHTML5?Math.max(e,0):Math.min(t.duration||t._iO.duration,Math.max(e,0));t.position=n,e=t.position/1e3,t._resetOnPosition(t.position),t._iO.position=n;if(t.isHTML5){if(t._a&&t._html5_canplay&&t._a.currentTime!==e)try{t._a.currentTime=e,(0===t.playState||t.paused)&&t._a.pause()}catch(r){}}else e=9===m?t.position:e,t.readyState&&2!==t.readyState&&a._setPosition(t.sID,e,t.paused||!t.playState);return t.isHTML5&&t.paused&&t._onTimer(!0),t},this.pause=function(e){return t.paused||0===t.playState&&1!==t.readyState?t:(t.paused=!0,t.isHTML5?(t._setup_html5().pause(),s()):(e||void 0===e)&&a._pause(t.sID),t._iO.onpause&&t._iO.onpause.apply(t),t)},this.resume=function(){var e=t._iO;return t.paused?(t.paused=!1,t.playState=1,t.isHTML5?(t._setup_html5().play(),o()):(e.isMovieStar&&!e.serverURL&&t.setPosition(t.position),a._pause(t.sID)),l&&e.onplay?(e.onplay.apply(t),l=!0):e.onresume&&e.onresume.apply(t),t):t},this.togglePause=function(){return 0===t.playState?(t.play({position:9===m&&!t.isHTML5?t.position:t.position/1e3}),t):(t.paused?t.resume():t.pause(),t)},this.setPan=function(e,n){return"undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=!1),t.isHTML5||a._setPan(t.sID,e),t._iO.pan=e,n||(t.pan=e,t.options.pan=e),t},this.setVolume=function(e,n){return"undefined"==typeof e&&(e=100),"undefined"==typeof n&&(n=!1),t.isHTML5?t._a&&(t._a.volume=Math.max(0,Math.min(1,e/100))):a._setVolume(t.sID,u.muted&&!t.muted||t.muted?0:e),t._iO.volume=e,n||(t.volume=e,t.options.volume=e),t},this.mute=function(){return t.muted=!0,t.isHTML5?t._a&&(t._a.muted=!0):a._setVolume(t.sID,0),t},this.unmute=function(){t.muted=!1;var e="undefined"!=typeof t._iO.volume;return t.isHTML5?t._a&&(t._a.muted=!1):a._setVolume(t.sID,e?t._iO.volume:t.options.volume),t},this.toggleMute=function(){return t.muted?t.unmute():t.mute()},this.onposition=this.onPosition=function(e,n,r){return c.push({position:e,method:n,scope:"undefined"!=typeof r?r:t,fired:!1}),t},this.clearOnPosition=function(e,t){var n,e=parseInt(e,10);if(isNaN(e))return!1;for(n=0;n<c.length;n++)e===c[n].position&&(!t||t===c[n].method)&&(c[n].fired&&h--,c.splice(n,1))},this._processOnPosition=function(){var e,n;e=c.length;if(!e||!t.playState||h>=e)return!1;for(;e--;)if(n=c[e],!n.fired&&t.position>=n.position)n.fired=!0,h++,n.method.apply(n.scope,[n.position]);return!0},this._resetOnPosition=function(e){var t,n;t=c.length;if(!t)return!1;for(;t--;)if(n=c[t],n.fired&&e<=n.position)n.fired=!1,h--;return!0},d=function(){var e=t._iO,n=e.from,r=e.to,i,s;return s=function(){t.clearOnPosition(r,s),t.stop()},i=function(){null!==r&&!isNaN(r)&&t.onPosition(r,s)},null!==n&&!isNaN(n)&&(e.position=n,e.multiShot=!1,i()),e},f=function(){var e=t._iO.onposition;if(e)for(var n in e)e.hasOwnProperty(n)&&t.onPosition(parseInt(n,10),e[n])},p=function(){var e=t._iO.onposition;if(e)for(var n in e)e.hasOwnProperty(n)&&t.clearOnPosition(parseInt(n,10))},o=function(){t.isHTML5&&nt(t)},s=function(){t.isHTML5&&rt(t)},n=function(){c=[],h=0,l=!1,t._hasTimer=null,t._a=null,t._html5_canplay=!1,t.bytesLoaded=null,t.bytesTotal=null,t.duration=t._iO&&t._iO.duration?t._iO.duration:null,t.durationEstimate=null,t.eqData=[],t.eqData.left=[],t.eqData.right=[],t.failures=0,t.isBuffering=!1,t.instanceOptions={},t.instanceCount=0,t.loaded=!1,t.metadata={},t.readyState=0,t.muted=!1,t.paused=!1,t.peakData={left:0,right:0},t.waveformData={left:[],right:[]},t.playState=0,t.position=null},n(),this._onTimer=function(e){var n,r=!1,i={};if(t._hasTimer||e)return t._a&&(e||(0<t.playState||1===t.readyState)&&!t.paused)?(n=t._get_html5_duration(),n!==g&&(g=n,t.duration=n,r=!0),t.durationEstimate=t.duration,n=1e3*t._a.currentTime||0,n!==y&&(y=n,r=!0),(r||e)&&t._whileplaying(n,i,i,i,i),r):!1},this._get_html5_duration=function(){var e=t._iO,n=t._a?1e3*t._a.duration:e?e.duration:void 0;return n&&!isNaN(n)&&Infinity!==n?n:e?e.duration:null},this._setup_html5=function(e){var e=T(t._iO,e),i=decodeURI,s=yt?u._global_a:t._a,o=i(e.url),a=s&&s._t?s._t.instanceOptions:null;if(s){if(s._t&&(!yt&&o===i(v)||yt&&a.url===e.url&&(!v||v===a.url)))return s;yt&&s._t&&s._t.playState&&e.url!==a.url&&s._t.stop(),n(),s.src=e.url,v=t.url=e.url,s._called_load=!1}else s=new Audio(e.url),s._called_load=!1,Ct&&(s._called_load=!0),yt&&(u._global_a=s);return t.isHTML5=!0,t._a=s,s._t=t,r(),s.loop=1<e.loops?"loop":"",e.autoLoad||e.autoPlay?t.load():(s.autobuffer=!1,s.preload="none"),s.loop=1<e.loops?"loop":"",s},r=function(){if(t._a._added_events)return!1;var e;t._a._added_events=!0;for(e in St)St.hasOwnProperty(e)&&t._a&&t._a.addEventListener(e,St[e],!1);return!0},i=function(){var e;t._a._added_events=!1;for(e in St)St.hasOwnProperty(e)&&t._a&&t._a.removeEventListener(e,St[e],!1)},this._onload=function(e){return e=!!e,t.loaded=e,t.readyState=e?3:2,t._onbufferchange(0),t._iO.onload&&t._iO.onload.apply(t,[e]),!0},this._onbufferchange=function(e){return 0===t.playState||e&&t.isBuffering||!e&&!t.isBuffering?!1:(t.isBuffering=1===e,t._iO.onbufferchange&&t._iO.onbufferchange.apply(t),!0)},this._onsuspend=function(){return t._iO.onsuspend&&t._iO.onsuspend.apply(t),!0},this._onfailure=function(e,n,r){t.failures++,t._iO.onfailure&&1===t.failures&&t._iO.onfailure(t,e,n,r)},this._onfinish=function(){var e=t._iO.onfinish;t._onbufferchange(0),t._resetOnPosition(0),t.instanceCount&&(t.instanceCount--,t.instanceCount||(p(),t.playState=0,t.paused=!1,t.instanceCount=0,t.instanceOptions={},t._iO={},s()),(!t.instanceCount||t._iO.multiShotEvents)&&e&&e.apply(t))},this._whileloading=function(e,n,r,i){var s=t._iO;t.bytesLoaded=e,t.bytesTotal=n,t.duration=Math.floor(r),t.bufferLength=i;if(s.isMovieStar)t.durationEstimate=t.duration;else if(t.durationEstimate=s.duration?t.duration>s.duration?t.duration:s.duration:parseInt(t.bytesTotal/t.bytesLoaded*t.duration,10),void 0===t.durationEstimate)t.durationEstimate=t.duration;3!==t.readyState&&s.whileloading&&s.whileloading.apply(t)},this._whileplaying=function(e,n,r,i,s){var o=t._iO;return isNaN(e)||null===e?!1:(t.position=e,t._processOnPosition(),!t.isHTML5&&8<m&&(o.usePeakData&&"undefined"!=typeof n&&n&&(t.peakData={left:n.leftPeak,right:n.rightPeak}),o.useWaveformData&&"undefined"!=typeof r&&r&&(t.waveformData={left:r.split(","),right:i.split(",")}),o.useEQData&&"undefined"!=typeof s&&s&&s.leftEQ&&(e=s.leftEQ.split(","),t.eqData=e,t.eqData.left=e,"undefined"!=typeof s.rightEQ&&s.rightEQ)&&(t.eqData.right=s.rightEQ.split(","))),1===t.playState&&(!t.isHTML5&&8===m&&!t.position&&t.isBuffering&&t._onbufferchange(0),o.whileplaying&&o.whileplaying.apply(t)),!0)},this._onmetadata=function(e,n){var r={},i,s;for(i=0,s=e.length;i<s;i++)r[e[i]]=n[i];t.metadata=r,t._iO.onmetadata&&t._iO.onmetadata.apply(t)},this._onid3=function(e,n){var r=[],i,s;for(i=0,s=e.length;i<s;i++)r[e[i]]=n[i];t.id3=T(t.id3,r),t._iO.onid3&&t._iO.onid3.apply(t)},this._onconnect=function(e){e=1===e;if(t.connected=e)t.failures=0,Z(t.sID)&&(t.getAutoPlay()?t.play(void 0,t.getAutoPlay()):t._iO.autoLoad&&t.load()),t._iO.onconnect&&t._iO.onconnect.apply(t,[e])},this._ondataerror=function(){0<t.playState&&t._iO.ondataerror&&t._iO.ondataerror.apply(t)}},B=function(){return p.body||p._docElement||p.getElementsByTagName("div")[0]},f=function(e){return p.getElementById(e)},T=function(e,t){var n={},r,i;for(r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);r="undefined"==typeof t?u.defaultOptions:t;for(i in r)r.hasOwnProperty(i)&&"undefined"==typeof n[i]&&(n[i]=r[i]);return n},mt=function(){function e(e){var e=gt.call(e),t=e.length;return n?(e[1]="on"+e[1],3<t&&e.pop()):3===t&&e.push(!1),e}function t(e,t){var i=e.shift(),s=[r[t]];n?i[s](e[0],e[1]):i[s].apply(i,e)}var n=c.attachEvent,r={add:n?"attachEvent":"addEventListener",remove:n?"detachEvent":"removeEventListener"};return{add:function(){t(e(arguments),"add")},remove:function(){t(e(arguments),"remove")}}}(),St={abort:r(function(){}),canplay:r(function(){var e=this._t;if(e._html5_canplay)return!0;e._html5_canplay=!0,e._onbufferchange(0);var t=isNaN(e.position)?null:e.position/1e3;if(e.position&&this.currentTime!==t)try{this.currentTime=t}catch(n){}e._iO._oncanplay&&e._iO._oncanplay()}),load:r(function(){var e=this._t;e.loaded||(e._onbufferchange(0),e._whileloading(e.bytesTotal,e.bytesTotal,e._get_html5_duration()),e._onload(!0))}),emptied:r(function(){}),ended:r(function(){this._t._onfinish()}),error:r(function(){this._t._onload(!1)}),loadeddata:r(function(){var e=this._t,t=e.bytesTotal||1;!e._loaded&&!At&&(e.duration=e._get_html5_duration(),e._whileloading(t,t,e._get_html5_duration()),e._onload(!0))}),loadedmetadata:r(function(){}),loadstart:r(function(){this._t._onbufferchange(1)}),play:r(function(){this._t._onbufferchange(0)}),playing:r(function(){this._t._onbufferchange(0)}),progress:r(function(e){var t=this._t;if(t.loaded)return!1;var n,r=0,i=e.target.buffered;n=e.loaded||0;var s=e.total||1;if(i&&i.length){for(n=i.length;n--;)r=i.end(n)-i.start(n);n=r/e.target.duration}isNaN(n)||(t._onbufferchange(0),t._whileloading(n,s,t._get_html5_duration()),n&&s&&n===s&&St.load.call(this,e))}),ratechange:r(function(){}),suspend:r(function(e){var t=this._t;St.progress.call(this,e),t._onsuspend()}),stalled:r(function(){}),timeupdate:r(function(){this._t._onTimer()}),waiting:r(function(){this._t._onbufferchange(1)})},lt=function(e){return!e.serverURL&&(e.type?ct({type:e.type}):ct({url:e.url})||u.html5Only)},pt=function(e){e&&(e.src=Nt?"":"about:blank")},ct=function(e){function t(e){return u.preferFlash&&bt&&!u.ignoreFlash&&"undefined"!=typeof u.flash[e]&&u.flash[e]}if(!u.useHTML5Audio||!u.hasHTML5)return!1;var n=e.url||null,e=e.type||null,r=u.audioFormats,i;if(e&&"undefined"!==u.html5[e])return u.html5[e]&&!t(e);if(!ht){ht=[];for(i in r)r.hasOwnProperty(i)&&(ht.push(i),r[i].related&&(ht=ht.concat(r[i].related)));ht=RegExp("\\.("+ht.join("|")+")(\\?.*)?$","i")}i=n?n.toLowerCase().match(ht):null;if(!i||!i.length){if(!e)return!1;n=e.indexOf(";"),i=(-1!==n?e.substr(0,n):e).substr(6)}else i=i[1];return i&&"undefined"!=typeof u.html5[i]?u.html5[i]&&!t(i):(e="audio/"+i,n=u.html5.canPlayType({type:e}),(u.html5[i]=n)&&u.html5[e]&&!t(e))},vt=function(){function e(e){var n,r,i=!1;if(!t||"function"!=typeof t.canPlayType)return!1;if(e instanceof Array){for(n=0,r=e.length;n<r&&!i;n++)if(u.html5[e[n]]||t.canPlayType(e[n]).match(u.html5Test))i=!0,u.html5[e[n]]=!0,u.flash[e[n]]=!(!u.preferFlash||!bt||!e[n].match(Bt));return i}return e=t&&"function"==typeof t.canPlayType?t.canPlayType(e):!1,!!e&&!!e.match(u.html5Test)}if(!u.useHTML5Audio||"undefined"==typeof Audio)return!1;var t="undefined"!=typeof Audio?Ot?new Audio(null):new Audio:null,n,r={},i,s;i=u.audioFormats;for(n in i)if(i.hasOwnProperty(n)&&(r[n]=e(i[n].type),r["audio/"+n]=r[n],u.flash[n]=u.preferFlash&&!u.ignoreFlash&&n.match(Bt)?!0:!1,i[n]&&i[n].related))for(s=i[n].related.length;s--;)r["audio/"+i[n].related[s]]=r[n],u.html5[i[n].related[s]]=r[n],u.flash[i[n].related[s]]=r[n];return r.canPlayType=t?e:null,u.html5=T(u.html5,r),!0},V=function(){},Q=function(e){return 8===m&&1<e.loops&&e.stream&&(e.stream=!1),e},G=function(e){return e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)&&(e.usePolicyFile=!0),e},Y=function(){},d=function(){return!1},R=function(e){for(var t in e)e.hasOwnProperty(t)&&"function"==typeof e[t]&&(e[t]=d)},U=function(e){"undefined"==typeof e&&(e=!1),(E||e)&&u.disable(e)},z=function(e){var t=null;if(e)if(e.match(/\.swf(\?.*)?$/i)){if(t=e.substr(e.toLowerCase().lastIndexOf(".swf?")+4))return e}else e.lastIndexOf("/")!==e.length-1&&(e+="/");return e=(e&&-1!==e.lastIndexOf("/")?e.substr(0,e.lastIndexOf("/")+1):"./")+u.movieURL,u.noSWFCache&&(e+="?ts="+(new Date).getTime()),e},O=function(){m=parseInt(u.flashVersion,10),8!==m&&9!==m&&(u.flashVersion=m=8);var e=u.debugMode||u.debugFlash?"_debug.swf":".swf";u.useHTML5Audio&&!u.html5Only&&u.audioFormats.mp4.required&&9>m&&(u.flashVersion=m=9),u.version=u.versionNumber+(u.html5Only?" (HTML5-only mode)":9===m?" (AS3/Flash 9)":" (AS2/Flash 8)"),8<m?(u.defaultOptions=T(u.defaultOptions,u.flash9Options),u.features.buffering=!0,u.defaultOptions=T(u.defaultOptions,u.movieStarOptions),u.filePatterns.flash9=RegExp("\\.(mp3|"+qt.join("|")+")(\\?.*)?$","i"),u.features.movieStar=!0):u.features.movieStar=!1,u.filePattern=u.filePatterns[8!==m?"flash9":"flash8"],u.movieURL=(8===m?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e),u.features.peakData=u.features.waveformData=u.features.eqData=8<m},I=function(e,t){if(!a)return!1;a._setPolling(e,t)},q=function(){u.debugURLParam.test(h)&&(u.debugMode=!0)},Z=this.getSoundById,K=function(){var e=[];return u.debugMode&&e.push("sm2_debug"),u.debugFlash&&e.push("flash_debug"),u.useHighPerformance&&e.push("high_performance"),e.join(" ")},$=function(){V("fbHandler");var e=u.getMoviePercent(),t={type:"FLASHBLOCK"};if(u.html5Only)return!1;u.ok()?u.oMC&&(u.oMC.className=[K(),"movieContainer","swf_loaded"+(u.didFlashBlock?" swf_unblocked":"")].join(" ")):(at&&(u.oMC.className=K()+" movieContainer "+(null===e?"swf_timedout":"swf_error")),u.didFlashBlock=!0,C({type:"ontimeout",ignoreInit:!0,error:t}),F(t))},N=function(e,t,n){"undefined"==typeof g[e]&&(g[e]=[]),g[e].push({method:t,scope:n||null,fired:!1})},C=function(e){e||(e={type:"onready"});if(!w&&e&&!e.ignoreInit||"ontimeout"===e.type&&u.ok())return!1;var t={success:e&&e.ignoreInit?u.ok():!E},n=e&&e.type?g[e.type]||[]:[],r=[],i,t=[t],s=at&&u.useFlashBlock&&!u.ok();e.error&&(t[0].error=e.error);for(e=0,i=n.length;e<i;e++)!0!==n[e].fired&&r.push(n[e]);if(r.length)for(e=0,i=r.length;e<i;e++)if(r[e].scope?r[e].method.apply(r[e].scope,t):r[e].method.apply(this,t),!s)r[e].fired=!0;return!0},k=function(){c.setTimeout(function(){u.useFlashBlock&&$(),C(),u.onload instanceof Function&&u.onload.apply(c),u.waitForWindowLoad&&mt.add(c,"load",k)},1)},wt=function(){if(void 0!==bt)return bt;var e=!1,t=navigator,n=t.plugins,r,i=c.ActiveXObject;if(n&&n.length)(t=t.mimeTypes)&&t["application/x-shockwave-flash"]&&t["application/x-shockwave-flash"].enabledPlugin&&t["application/x-shockwave-flash"].enabledPlugin.description&&(e=!0);else if("undefined"!=typeof i){try{r=new i("ShockwaveFlash.ShockwaveFlash")}catch(s){}e=!!r}return bt=e},ft=function(){var e,t;if(Tt&&l.match(/os (1|2|3_0|3_1)/i))return u.hasHTML5=!1,u.html5Only=!0,u.oMC&&(u.oMC.style.display="none"),!1;if(!u.useHTML5Audio)return!0;if(!u.html5||!u.html5.canPlayType)return u.hasHTML5=!1,!0;u.hasHTML5=!0;if(_t&&wt())return!0;for(t in u.audioFormats)u.audioFormats.hasOwnProperty(t)&&(u.audioFormats[t].required&&!u.html5.canPlayType(u.audioFormats[t].type)||u.flash[t]||u.flash[u.audioFormats[t].type])&&(e=!0);return u.ignoreFlash&&(e=!1),u.html5Only=u.hasHTML5&&u.useHTML5Audio&&!e,!u.html5Only},ut=function(e){var t,n,r=0;if(e instanceof Array){for(t=0,n=e.length;t<n;t++)if(e[t]instanceof Object){if(u.canPlayMIME(e[t].type)){r=t;break}}else if(u.canPlayURL(e[t])){r=t;break}return e[r].url&&(e[r]=e[r].url),e[r]}return e},nt=function(t){t._hasTimer||(t._hasTimer=!0,!Mt&&u.html5PollingInterval&&(null===ot&&0===st&&(ot=e.setInterval(it,u.html5PollingInterval)),st++))},rt=function(e){e._hasTimer&&(e._hasTimer=!1,!Mt&&u.html5PollingInterval&&st--)},it=function(){var t;if(null!==ot&&!st)return e.clearInterval(ot),ot=null,!1;for(t=u.soundIDs.length;t--;)u.sounds[u.soundIDs[t]].isHTML5&&u.sounds[u.soundIDs[t]]._hasTimer&&u.sounds[u.soundIDs[t]]._onTimer()},F=function(e){e="undefined"!=typeof e?e:{},u.onerror instanceof Function&&u.onerror.apply(c,[{type:"undefined"!=typeof e.type?e.type:null}]),"undefined"!=typeof e.fatal&&e.fatal&&u.disable()},Et=function(){if(!_t||!wt())return!1;var e=u.audioFormats,t,n;for(n in e)if(e.hasOwnProperty(n)&&("mp3"===n||"mp4"===n))if(u.html5[n]=!1,e[n]&&e[n].related)for(t=e[n].related.length;t--;)u.html5[e[n].related[t]]=!1},this._setSandboxType=function(){},this._externalInterfaceOK=function(){if(u.swfLoaded)return!1;(new Date).getTime(),u.swfLoaded=!0,Pt=!1,_t&&Et(),kt?setTimeout(v,100):v()},j=function(e,t){function n(e,t){return'<param name="'+e+'" value="'+t+'" />'}if(y&&b)return!1;if(u.html5Only)return O(),u.oMC=f(u.movieID),v(),b=y=!0,!1;var r=t||u.url,i=u.altURL||r,s;s=B();var o,a,c=K(),h,d=null,d=(d=p.getElementsByTagName("html")[0])&&d.dir&&d.dir.match(/rtl/i),e="undefined"==typeof e?u.id:e;O(),u.url=z(jt?r:i),t=u.url,u.wmode=!u.wmode&&u.useHighPerformance?"transparent":u.wmode,null!==u.wmode&&(l.match(/msie 8/i)||!kt&&!u.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(u.wmode=null),s={name:e,id:e,src:t,width:"auto",height:"auto",quality:"high",allowScriptAccess:u.allowScriptAccess,bgcolor:u.bgColor,pluginspage:Ft+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:u.wmode,hasPriority:"true"},u.debugFlash&&(s.FlashVars="debug=1"),u.wmode||delete s.wmode;if(kt)r=p.createElement("div"),a=['<object id="'+e+'" data="'+t+'" type="'+s.type+'" title="'+s.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+Ft+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" width="'+s.width+'" height="'+s.height+'">',n("movie",t),n("AllowScriptAccess",u.allowScriptAccess),n("quality",s.quality),u.wmode?n("wmode",u.wmode):"",n("bgcolor",u.bgColor),n("hasPriority","true"),u.debugFlash?n("FlashVars",s.FlashVars):"","</object>"].join("");else for(o in r=p.createElement("embed"),s)s.hasOwnProperty(o)&&r.setAttribute(o,s[o]);q(),c=K();if(s=B())if(u.oMC=f(u.movieID)||p.createElement("div"),u.oMC.id)h=u.oMC.className,u.oMC.className=(h?h+" ":"movieContainer")+(c?" "+c:""),u.oMC.appendChild(r),kt&&(o=u.oMC.appendChild(p.createElement("div")),o.className="sm2-object-box",o.innerHTML=a),b=!0;else{u.oMC.id=u.movieID,u.oMC.className="movieContainer "+c,o=c=null;if(!u.useFlashBlock)if(u.useHighPerformance)c={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"};else if(c={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},d)c.left=Math.abs(parseInt(c.left,10))+"px";Lt&&(u.oMC.style.zIndex=1e4);if(!u.debugFlash)for(h in c)c.hasOwnProperty(h)&&(u.oMC.style[h]=c[h]);try{kt||u.oMC.appendChild(r),s.appendChild(u.oMC),kt&&(o=u.oMC.appendChild(p.createElement("div")),o.className="sm2-object-box",o.innerHTML=a),b=!0}catch(m){throw Error(V("domError")+" \n"+m.toString())}}return y=!0},_=function(){return u.html5Only?(j(),!1):a?!1:(a=u.getMovie(u.id),a||(W?(kt?u.oMC.innerHTML=X:u.oMC.appendChild(W),W=null,y=!0):j(u.id,u.url),a=u.getMovie(u.id)),u.oninitmovie instanceof Function&&setTimeout(u.oninitmovie,1),!0)},L=function(){setTimeout(A,1e3)},A=function(){if(et)return!1;et=!0,mt.remove(c,"load",L);if(Pt&&!Dt)return!1;var e;w||(e=u.getMoviePercent()),setTimeout(function(){e=u.getMoviePercent(),!w&&Ht&&(null===e?u.useFlashBlock||0===u.flashLoadTimeout?u.useFlashBlock&&$():U(!0):0!==u.flashLoadTimeout&&U(!0))},u.flashLoadTimeout)},M=function(){function e(){mt.remove(c,"focus",M),mt.remove(c,"load",M)}return Dt||!Pt?(e(),!0):(Dt=Ht=!0,At&&Pt&&mt.remove(c,"mousemove",M),et=!1,e(),!0)},xt=function(){var e,t=[];if(u.useHTML5Audio&&u.hasHTML5)for(e in u.audioFormats)u.audioFormats.hasOwnProperty(e)&&t.push(e+": "+u.html5[e]+(!u.html5[e]&&bt&&u.flash[e]?" (using flash)":u.preferFlash&&u.flash[e]&&bt?" (preferring flash)":u.html5[e]?"":" ("+(u.audioFormats[e].required?"required, ":"")+"and no flash support)"))},x=function(e){if(w)return!1;if(u.html5Only)return w=!0,k(),!0;var t;if(!u.useFlashBlock||!u.flashLoadTimeout||u.getMoviePercent())w=!0,E&&(t={type:!bt&&at?"NO_FLASH":"INIT_TIMEOUT"});return E||e?(u.useFlashBlock&&u.oMC&&(u.oMC.className=K()+" "+(null===u.getMoviePercent()?"swf_timedout":"swf_error")),C({type:"ontimeout",error:t}),F(t),!1):u.waitForWindowLoad&&!S?(mt.add(c,"load",k),!1):(k(),!0)},v=function(){if(w)return!1;if(u.html5Only)return w||(mt.remove(c,"load",u.beginDelayedInit),u.enabled=!0,x()),!0;_();try{a._externalInterfaceTest(!1),I(!0,u.flashPollingInterval||(u.useHighPerformance?10:50)),u.debugMode||a._disableDebug(),u.enabled=!0,u.html5Only||mt.add(c,"unload",d)}catch(e){return F({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),U(!0),x(),!1}return x(),mt.remove(c,"load",u.beginDelayedInit),!0},D=function(){return H?!1:(H=!0,q(),!bt&&u.hasHTML5&&(u.useHTML5Audio=!0,u.preferFlash=!1),vt(),u.html5.usingFlash=ft(),at=u.html5.usingFlash,xt(),!bt&&at&&(u.flashLoadTimeout=1),p.removeEventListener&&p.removeEventListener("DOMContentLoaded",D,!1),_(),!0)},dt=function(){return"complete"===p.readyState&&(D(),p.detachEvent("onreadystatechange",dt)),!0},P=function(){S=!0,mt.remove(c,"load",P)},wt(),mt.add(c,"focus",M),mt.add(c,"load",M),mt.add(c,"load",L),mt.add(c,"load",P),At&&Pt&&mt.add(c,"mousemove",M),p.addEventListener?p.addEventListener("DOMContentLoaded",D,!1):p.attachEvent?p.attachEvent("onreadystatechange",dt):F({type:"NO_DOM2_EVENTS",fatal:!0}),"complete"===p.readyState&&setTimeout(D,100)}var n=null;if("undefined"==typeof SM2_DEFER||!SM2_DEFER)n=new t;e.SoundManager=t,e.soundManager=n})(window);